(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9734],{20725:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>w});var a=r(95155),t=r(12115),n=r(35695),i=r(76517),o=r(94449),l=r(85339),c=r(53904),d=r(57340),h=r(51976),u=r(14186),m=r(38564),x=r(86151),f=r(91788),v=r(97168),g=r(88482),p=r(88145),j=r(41397),b=r(56671);function w(){let e=(0,n.useRouter)(),[s,r]=(0,t.useState)(!0),[w,N]=(0,t.useState)(0),[y,C]=(0,t.useState)({favoriteOrders:[],recentSearches:[],cachedDishes:[],savedData:0});(0,t.useEffect)(()=>{r(navigator.onLine);let s=()=>{r(!0),b.oR.success("Conexi\xf3n restaurada"),setTimeout(()=>{e.push("/client/home")},2e3)},a=()=>{r(!1),b.oR.error("Sin conexi\xf3n a internet")};return window.addEventListener("online",s),window.addEventListener("offline",a),S(),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}},[e]);let S=async()=>{try{let e=JSON.parse(localStorage.getItem("offline_favorites")||"[]"),s=JSON.parse(localStorage.getItem("recent_searches")||"[]"),r=JSON.parse(localStorage.getItem("cached_dishes")||"[]"),a=new Blob([localStorage.getItem("offline_favorites")||"",localStorage.getItem("recent_searches")||"",localStorage.getItem("cached_dishes")||""]).size;C({favoriteOrders:e,recentSearches:s,cachedDishes:r,savedData:Math.round(a/1024)})}catch(e){console.error("Error loading offline data:",e)}},k=async()=>{N(e=>e+1);try{(await fetch("/api/health",{method:"HEAD",cache:"no-cache"})).ok&&(r(!0),b.oR.success("Conexi\xf3n restaurada"),e.push("/client/home"))}catch(e){b.oR.error("A\xfan sin conexi\xf3n")}};return(0,a.jsx)("div",{className:"min-h-screen bg-background p-4",children:(0,a.jsxs)("div",{className:"container mx-auto max-w-2xl",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"mb-4",children:s?(0,a.jsx)(i.A,{className:"h-16 w-16 mx-auto text-green-500"}):(0,a.jsx)(o.A,{className:"h-16 w-16 mx-auto text-red-500"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:s?"\xa1Conexi\xf3n Restaurada!":"Sin Conexi\xf3n"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:s?"Tu conexi\xf3n a internet ha sido restaurada. Redirigiendo...":"No hay conexi\xf3n a internet. Algunos contenidos est\xe1n disponibles offline."})]}),(0,a.jsxs)(g.Zp,{className:"mb-6",children:[(0,a.jsx)(g.aR,{children:(0,a.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-5 w-5"}),"Estado de Conexi\xf3n"]})}),(0,a.jsxs)(g.Wu,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{children:"Estado actual:"}),(0,a.jsx)(p.E,{variant:s?"default":"destructive",children:s?"En l\xednea":"Sin conexi\xf3n"})]}),!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{children:"Intentos de reconexi\xf3n:"}),(0,a.jsx)("span",{className:"font-mono",children:w})]}),(0,a.jsxs)(v.$,{onClick:k,className:"w-full",variant:"outline",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Reintentar Conexi\xf3n"]})]}),s&&(0,a.jsxs)(v.$,{onClick:()=>{e.push("/client/home")},className:"w-full bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Ir al Inicio"]})]})]}),!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g.Zp,{className:"mb-6",children:[(0,a.jsxs)(g.aR,{children:[(0,a.jsx)(g.ZB,{children:"Funciones Disponibles Offline"}),(0,a.jsx)(g.BT,{children:"Estas acciones funcionan sin conexi\xf3n a internet"})]}),(0,a.jsx)(g.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(v.$,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>e.push("/favorites"),children:[(0,a.jsx)(h.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Favoritos"})]}),(0,a.jsxs)(v.$,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>e.push("/orders/history"),children:[(0,a.jsx)(u.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Historial"})]}),(0,a.jsxs)(v.$,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>e.push("/search"),children:[(0,a.jsx)(m.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"B\xfasquedas"})]}),(0,a.jsxs)(v.$,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>e.push("/profile"),children:[(0,a.jsx)(x.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Perfil"})]})]})})]}),(0,a.jsxs)(g.Zp,{className:"mb-6",children:[(0,a.jsxs)(g.aR,{children:[(0,a.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-5 w-5"}),"Datos Guardados Offline"]}),(0,a.jsx)(g.BT,{children:"Informaci\xf3n disponible sin conexi\xf3n"})]}),(0,a.jsxs)(g.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Pedidos favoritos:"}),(0,a.jsx)(p.E,{variant:"secondary",children:y.favoriteOrders.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"B\xfasquedas recientes:"}),(0,a.jsx)(p.E,{variant:"secondary",children:y.recentSearches.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Platos en cach\xe9:"}),(0,a.jsx)(p.E,{variant:"secondary",children:y.cachedDishes.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Espacio utilizado:"}),(0,a.jsxs)(p.E,{variant:"outline",children:[y.savedData," KB"]})]}),(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)(v.$,{variant:"outline",size:"sm",onClick:()=>{localStorage.removeItem("offline_favorites"),localStorage.removeItem("recent_searches"),localStorage.removeItem("cached_dishes"),C({favoriteOrders:[],recentSearches:[],cachedDishes:[],savedData:0}),b.oR.success("Datos offline eliminados")},className:"w-full",children:"Limpiar Datos Offline"})})]})]}),(0,a.jsxs)(g.Zp,{children:[(0,a.jsx)(g.aR,{children:(0,a.jsx)(g.ZB,{children:"Consejos para Uso Offline"})}),(0,a.jsx)(g.Wu,{children:(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,a.jsx)("li",{children:"• Los datos se sinronizar\xe1n autom\xe1ticamente cuando se restaure la conexi\xf3n"}),(0,a.jsx)("li",{children:"• Puedes ver tu historial de pedidos y platos favoritos"}),(0,a.jsx)("li",{children:"• Las b\xfasquedas recientes est\xe1n disponibles sin conexi\xf3n"}),(0,a.jsx)("li",{children:"• Los cambios se guardar\xe1n localmente hasta que haya conexi\xf3n"})]})})]})]}),s&&(0,a.jsx)(g.Zp,{children:(0,a.jsx)(g.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Redirigiendo al inicio en unos segundos..."}),(0,a.jsx)(j.k,{value:66,className:"w-full"})]})})})]})})}},41397:(e,s,r)=>{"use strict";r.d(s,{k:()=>o});var a=r(95155),t=r(12115),n=r(55863),i=r(53999);let o=t.forwardRef((e,s)=>{let{className:r,value:t,...o}=e;return(0,a.jsx)(n.bL,{ref:s,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",r),...o,children:(0,a.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});o.displayName=n.bL.displayName},53999:(e,s,r)=>{"use strict";r.d(s,{$B:()=>u,$g:()=>i,Dm:()=>c,HM:()=>l,bC:()=>h,cn:()=>n,generateDeliveryCode:()=>o,uA:()=>d});var a=r(52596),t=r(39688);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,a.$)(s))}function i(e){return"$".concat(Math.round(e).toLocaleString("es-CL"))}function o(){return Math.floor(1e3+9e3*Math.random()).toString()}function l(e){return e.replace(/(\d{2})(\d{2})/,"$1-$2")}function c(e){let s=0;return e.forEach(e=>{let r=function(e){var s,r;let a=e.toLowerCase();return a.includes("hour")?60*parseFloat((null==(s=a.match(/(\d+(?:\.\d+)?)/))?void 0:s[1])||"1"):a.includes("min")?parseInt((null==(r=a.match(/(\d+)/))?void 0:r[1])||"30"):30}(e.prepTime);r>s&&(s=r)}),s}function d(e,s){return Math.min(Math.max((new Date().getTime()-e.getTime())/6e4/s*100,0),100)}function h(e,s){let r=new Date(e);return r.setMinutes(r.getMinutes()+s),r}function u(e,s){let r=new Date,a=h(e,s).getTime()-r.getTime();if(a<=0)return"Listo";let t=Math.ceil(a/6e4);if(t<60)return"".concat(t," min");{let e=Math.floor(t/60);return"".concat(e,"h ").concat(t%60,"m")}}},67785:(e,s,r)=>{Promise.resolve().then(r.bind(r,20725))},88145:(e,s,r)=>{"use strict";r.d(s,{E:()=>o});var a=r(95155);r(12115);var t=r(74466),n=r(53999);let i=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:r,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),s),...t})}},88482:(e,s,r)=>{"use strict";r.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o});var a=r(95155),t=r(12115),n=r(53999);let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300 hover:shadow-lg",r),...t})});i.displayName="Card";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...t})});o.displayName="CardHeader";let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});l.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",r),...t})});c.displayName="CardDescription";let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",r),...t})});d.displayName="CardContent",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",r),...t})}).displayName="CardFooter"},97168:(e,s,r)=>{"use strict";r.d(s,{$:()=>d});var a=r(95155),t=r(12115),n=r(99708),i=r(74466),o=r(38274),l=r(53999);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold transition-all duration-300 transform hover:scale-105 active:scale-95 disabled:pointer-events-none disabled:opacity-50 disabled:hover:scale-100 disabled:active:scale-100 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-offset-2 relative overflow-hidden group",{variants:{variant:{default:"bg-gradient-to-r from-moai-500 to-moai-600 text-white shadow-lg hover:shadow-xl hover:shadow-moai-500/25 border-0 hover:from-moai-600 hover:to-moai-700",destructive:"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:from-red-600 hover:to-red-700",outline:"border-2 border-moai-200 bg-background/80 backdrop-blur-sm shadow-sm hover:bg-moai-50 hover:text-moai-700 hover:border-moai-300 hover:shadow-md",secondary:"bg-gradient-to-r from-pacific-500 to-pacific-600 text-white shadow-lg hover:shadow-xl hover:shadow-pacific-500/25 hover:from-pacific-600 hover:to-pacific-700",ghost:"hover:bg-moai-50/80 hover:text-moai-700 hover:backdrop-blur-sm",link:"text-moai-600 underline-offset-4 hover:underline hover:text-moai-700 p-0 h-auto shadow-none hover:shadow-none",glass:"bg-white/10 backdrop-blur-md border border-white/20 text-white shadow-lg hover:bg-white/20 hover:shadow-xl",premium:"bg-gradient-to-r from-amber-400 via-orange-500 to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-orange-500/30 hover:from-amber-500 hover:via-orange-600 hover:to-red-600"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-lg gap-1.5 px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,s)=>{let{className:r,variant:t,size:i,asChild:d=!1,loading:h=!1,icon:u,glow:m=!1,children:x,...f}=e,v=d?n.DX:"button";return(0,a.jsxs)(v,{className:(0,l.cn)(c({variant:t,size:i,className:r})),ref:s,disabled:h||f.disabled,...f,children:[(0,a.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),m&&(0,a.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-moai-500/20 to-pacific-500/20 blur-xl group-hover:blur-2xl transition-all duration-300 opacity-0 group-hover:opacity-100"}),h&&(0,a.jsx)(o.P.div,{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),u&&!h&&(0,a.jsx)(o.P.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:u}),(0,a.jsx)("span",{className:"relative z-10 flex items-center gap-2",children:x})]})});d.displayName="Button"}},e=>{e.O(0,[6331,6671,6209,8441,5964,7358],()=>e(e.s=67785)),_N_E=e.O()}]);