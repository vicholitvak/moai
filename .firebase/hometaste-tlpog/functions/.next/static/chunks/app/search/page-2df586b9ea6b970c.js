(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2959],{2044:(e,s,a)=>{Promise.resolve().then(a.bind(a,62086))},62086:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>A});var l=a(95155),t=a(12115),r=a(35695),i=a(25731),c=a(36515),n=a(14186),o=a(38564),d=a(4516),m=a(27809),x=a(51976),h=a(35169),u=a(54653),j=a(15968),p=a(47924),g=a(97168),N=a(88482),f=a(88145),v=a(69663),b=a(53999),w=a(56671),k=a(74042);function y(){let e=(0,r.useSearchParams)(),{user:s}=(0,i.A)(),{addToCart:a}=(0,c._)(),y=(0,r.useRouter)(),[A,C]=(0,t.useState)(null),[R,E]=(0,t.useState)("grid"),[$,q]=(0,t.useState)(!1),T=e.get("q")||"",z=e.get("category")||void 0,_=async e=>{if(!s)return void w.oR.error("Debes iniciar sesi\xf3n para agregar al carrito");try{let s={dishId:e.id,name:e.name,price:e.price,image:e.image,cookerName:e.cookerName,cookerId:e.cookerId,cookerAvatar:e.cookerAvatar,quantity:1,prepTime:e.prepTime,category:e.category};a(s),w.oR.success("".concat(e.name," agregado al carrito"))}catch(e){console.error("Error adding to cart:",e),w.oR.error("Error al agregar al carrito")}},P=e=>{var s,a,r,i;let{dish:c,compact:h=!1}=e,[u,j]=(0,t.useState)(!1);return h?(0,l.jsx)(N.Zp,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-[1.02]",onClick:()=>y.push("/dishes/".concat(c.id)),children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("div",{className:"w-24 h-24 relative flex-shrink-0",children:[(0,l.jsx)("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover rounded-l-lg",onError:e=>{e.currentTarget.src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=200&h=200&fit=crop"}}),!c.isAvailable&&(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-l-lg flex items-center justify-center",children:(0,l.jsx)(f.E,{variant:"destructive",children:"Agotado"})})]}),(0,l.jsx)(N.Wu,{className:"flex-1 p-4",children:(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-semibold text-base mb-1 line-clamp-1",children:c.name}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:c.description}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsxs)(v.eu,{className:"h-5 w-5",children:[(0,l.jsx)(v.BK,{src:c.cookerAvatar}),(0,l.jsx)(v.q5,{children:null==(r=c.cookerName)?void 0:r[0]})]}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:c.cookerName})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(n.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:c.prepTime})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(o.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,l.jsx)("span",{children:(null==(i=c.rating)?void 0:i.toFixed(1))||"Nuevo"})]}),c.distance&&(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(d.A,{className:"h-3 w-3"}),(0,l.jsxs)("span",{children:[c.distance.toFixed(1)," km"]})]})]})]}),(0,l.jsxs)("div",{className:"text-right ml-4",children:[(0,l.jsx)("p",{className:"text-lg font-bold text-primary",children:(0,b.$g)(c.price)}),(0,l.jsxs)(g.$,{size:"sm",disabled:!c.isAvailable,onClick:e=>{e.stopPropagation(),_(c)},className:"mt-2",children:[(0,l.jsx)(m.A,{className:"h-3 w-3 mr-1"}),"Agregar"]})]})]})})]})}):(0,l.jsxs)(N.Zp,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105",onClick:()=>y.push("/dishes/".concat(c.id)),children:[(0,l.jsxs)("div",{className:"aspect-[4/3] relative",children:[(0,l.jsx)("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover rounded-t-lg",onError:e=>{e.currentTarget.src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400&h=300&fit=crop"}}),(0,l.jsx)(g.$,{size:"sm",variant:"ghost",className:"absolute top-2 right-2 h-8 w-8 p-0 ".concat(u?"text-red-500":"text-white"),onClick:e=>{e.stopPropagation(),j(!u)},children:(0,l.jsx)(x.A,{className:"h-4 w-4 ".concat(u?"fill-current":"")})}),!c.isAvailable&&(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-t-lg flex items-center justify-center",children:(0,l.jsx)(f.E,{variant:"destructive",children:"Agotado"})}),c.score&&c.score>.8&&(0,l.jsx)(f.E,{className:"absolute top-2 left-2 bg-green-500",children:"Muy Popular"})]}),(0,l.jsxs)(N.Wu,{className:"p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)("h3",{className:"font-semibold text-base line-clamp-1",children:c.name}),(0,l.jsx)("span",{className:"text-lg font-bold text-primary",children:(0,b.$g)(c.price)})]}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:c.description}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,l.jsxs)(v.eu,{className:"h-6 w-6",children:[(0,l.jsx)(v.BK,{src:c.cookerAvatar}),(0,l.jsx)(v.q5,{children:null==(s=c.cookerName)?void 0:s[0]})]}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:c.cookerName})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(n.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:c.prepTime})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(o.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,l.jsx)("span",{children:(null==(a=c.rating)?void 0:a.toFixed(1))||"Nuevo"})]}),c.distance&&(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(d.A,{className:"h-3 w-3"}),(0,l.jsxs)("span",{children:[c.distance.toFixed(1)," km"]})]})]}),(0,l.jsxs)(g.$,{className:"w-full",disabled:!c.isAvailable,onClick:e=>{e.stopPropagation(),_(c)},children:[(0,l.jsx)(m.A,{className:"h-4 w-4 mr-2"}),c.isAvailable?"Agregar al Carrito":"Agotado"]})]})]})};return(0,l.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,l.jsx)("div",{className:"sticky top-0 z-50 border-b bg-background/95 backdrop-blur",children:(0,l.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(g.$,{variant:"ghost",size:"sm",onClick:()=>y.back(),children:(0,l.jsx)(h.A,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold",children:"Resultados de B\xfasqueda"}),A&&(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:[A.totalResults," resultado",1!==A.totalResults?"s":""," encontrado",1!==A.totalResults?"s":""]})]})]})})}),(0,l.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,l.jsx)(N.Zp,{className:"mb-6",children:(0,l.jsx)(N.Wu,{className:"pt-6",children:(0,l.jsx)(k.n,{compact:!0,initialFilters:{query:T,category:z},onResultsChange:e=>{C(e)}})})}),A&&(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:T?'Resultados para "'.concat(T,'"'):"Todos los platos"}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:[A.totalResults," plato",1!==A.totalResults?"s":""," â€¢ B\xfasqueda en ",A.searchTime,"ms"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(g.$,{variant:"grid"===R?"default":"outline",size:"sm",onClick:()=>E("grid"),children:(0,l.jsx)(u.A,{className:"h-4 w-4"})}),(0,l.jsx)(g.$,{variant:"list"===R?"default":"outline",size:"sm",onClick:()=>E("list"),children:(0,l.jsx)(j.A,{className:"h-4 w-4"})})]})]}),A&&A.suggestions&&A.suggestions.length>0&&(0,l.jsx)(N.Zp,{className:"mb-6",children:(0,l.jsxs)(N.Wu,{className:"pt-6",children:[(0,l.jsx)("p",{className:"text-sm font-medium mb-2",children:"\xbfQuisiste decir?"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:A.suggestions.map(e=>(0,l.jsx)(g.$,{variant:"outline",size:"sm",onClick:()=>y.push("/search?q=".concat(encodeURIComponent(e))),children:e},e))})]})}),A&&A.dishes.length>0?(0,l.jsx)("div",{className:"grid"===R?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:A.dishes.map(e=>(0,l.jsx)(P,{dish:e,compact:"list"===R},e.id))}):A&&0===A.dishes.length?(0,l.jsx)(N.Zp,{children:(0,l.jsxs)(N.Wu,{className:"p-8 text-center",children:[(0,l.jsx)(p.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No se encontraron resultados"}),(0,l.jsx)("p",{className:"text-muted-foreground mb-4",children:"Intenta con diferentes t\xe9rminos de b\xfasqueda o ajusta los filtros"}),(0,l.jsx)(g.$,{variant:"outline",onClick:()=>y.push("/client/home"),children:"Explorar todos los platos"})]})}):(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})]})}function A(){return(0,l.jsx)(t.Suspense,{fallback:(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),children:(0,l.jsx)(y,{})})}}},e=>{e.O(0,[9135,3965,6331,2670,6671,1492,8250,8034,3143,231,7931,6751,8275,2104,4042,8441,5964,7358],()=>e(e.s=2044)),_N_E=e.O()}]);