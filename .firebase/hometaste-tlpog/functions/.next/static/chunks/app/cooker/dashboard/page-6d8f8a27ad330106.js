(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{25731:(e,s,a)=>{"use strict";a.d(s,{A:()=>d,AuthProvider:()=>c});var r=a(95155),i=a(12115),t=a(66579),l=a(45404),n=a(35317);let o=(0,i.createContext)({user:null,role:null,loading:!0,logout:async()=>{}}),c=e=>{let{children:s}=e,[a,c]=(0,i.useState)(null),[d,m]=(0,i.useState)(null),[x,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=(0,l.hg)(t.j,async e=>{try{if(e){c(e);let s="admin@moai.com"===e.email||"admin"===e.uid||e.email&&e.email.includes("admin"),a=(0,n.doc)(t.db,"users",e.uid),r=await (0,n.getDoc)(a),i=0,l=s?2:5;for(;!r.exists()&&i<l;){let s=Math.min(500*Math.pow(2,i),8e3);console.log("AuthContext: Retrying user document fetch (".concat(i+1,"/").concat(l,") after ").concat(s,"ms for ").concat(e.email)),await new Promise(e=>setTimeout(e,s)),r=await (0,n.getDoc)(a),i++}if(r.exists()){let i=r.data().role;s&&"Admin"!==i&&(i="Admin",await (0,n.BN)(a,{role:"Admin"},{merge:!0})),m(i),console.log("AuthContext: User ".concat(e.email," has role: ").concat(i))}else if(s)await (0,n.BN)(a,{role:"Admin"},{merge:!0}),m("Admin"),console.log("AuthContext: Created Admin role for ".concat(e.email));else{console.warn("AuthContext: User ".concat(e.email," document not found after ").concat(i," retries. This may indicate a network issue or missing registration.")),setTimeout(()=>{m(null),console.log("AuthContext: Set role to null for ".concat(e.email," after extended wait"))},2e3);return}}else c(null),m(null)}catch(s){console.error("Auth state change error:",s),e?(c(e),m("admin@moai.com"===e.email||"admin"===e.uid||e.email&&e.email.includes("admin")?"Admin":null)):(c(null),m(null))}finally{u(!1)}});return()=>e()},[]);let h=async()=>{try{await (0,l.CI)(t.j);try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.warn("API logout failed, but Firebase logout succeeded:",e)}}catch(e){console.error("Error signing out:",e)}};return(0,r.jsx)(o.Provider,{value:{user:a,role:d,loading:x,logout:h},children:s})},d=()=>(0,i.useContext)(o)},38053:(e,s,a)=>{Promise.resolve().then(a.bind(a,64908))},53999:(e,s,a)=>{"use strict";a.d(s,{$B:()=>x,$g:()=>l,Dm:()=>c,HM:()=>o,bC:()=>m,cn:()=>t,generateDeliveryCode:()=>n,uA:()=>d});var r=a(52596),i=a(39688);function t(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,i.QP)((0,r.$)(s))}function l(e){return"$".concat(Math.round(e).toLocaleString("es-CL"))}function n(){return Math.floor(1e3+9e3*Math.random()).toString()}function o(e){return e.replace(/(\d{2})(\d{2})/,"$1-$2")}function c(e){let s=0;return e.forEach(e=>{let a=function(e){var s,a;let r=e.toLowerCase();return r.includes("hour")?60*parseFloat((null==(s=r.match(/(\d+(?:\.\d+)?)/))?void 0:s[1])||"1"):r.includes("min")?parseInt((null==(a=r.match(/(\d+)/))?void 0:a[1])||"30"):30}(e.prepTime);a>s&&(s=a)}),s}function d(e,s){return Math.min(Math.max((new Date().getTime()-e.getTime())/6e4/s*100,0),100)}function m(e,s){let a=new Date(e);return a.setMinutes(a.getMinutes()+s),a}function x(e,s){let a=new Date,r=m(e,s).getTime()-a.getTime();if(r<=0)return"Listo";let i=Math.ceil(r/6e4);if(i<60)return"".concat(i," min");{let e=Math.floor(i/60);return"".concat(e,"h ").concat(i%60,"m")}}},64908:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eI});var r=a(95155),i=a(12115),t=a(25731),l=a(35695),n=a(66766),o=a(38564),c=a(27265),d=a(59629),m=a(13717),x=a(92657),u=a(95747),h=a(4516),g=a(19420),p=a(29799),j=a(71366),v=a(92138),b=a(40646),f=a(23861),N=a(381),y=a(34835),w=a(66474),C=a(33109),A=a(50744),k=a(14186),D=a(84616),I=a(54861),S=a(85339),P=a(37108),E=a(17580),M=a(97168),T=a(88482),R=a(88145),z=a(69663),F=a(37128),L=a(54416),Z=a(29869),B=a(87712),J=a(82714),$=a(89852),O=a(99474);let W=e=>{let{dish:s,isOpen:a,onClose:t,onSave:l}=e,n="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNzUgMTI1SDE5NVYxNDVIMjE1VjE2NUgxOTVWMTg1SDE3NVYxNjVIMTU1VjE0NUgxNzVWMTI1WiIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4K",[o,c]=(0,i.useState)({name:"",description:"",price:0,category:"",prepTime:"",status:"active",image:"",ingredients:[],allergens:[],nutritionInfo:{calories:0,protein:"",carbs:"",fat:""},deliveryMode:"cook",deliveryFee:0}),[d,m]=(0,i.useState)(""),[x,u]=(0,i.useState)(""),[h,g]=(0,i.useState)(n),[p,j]=(0,i.useState)([]),[v,b]=(0,i.useState)(0),[f,N]=(0,i.useState)(!1);(0,i.useEffect)(()=>{s&&a&&(c({name:s.name||"",description:s.description||"",price:s.price||0,category:s.category||"",prepTime:s.prepTime||"",status:s.status||"active",image:s.image||"",ingredients:s.ingredients||[],deliveryMode:s.deliveryMode||"cook",deliveryFee:s.deliveryFee||0,allergens:s.allergens||[],nutritionInfo:s.nutritionInfo||{calories:0,protein:"",carbs:"",fat:""}}),g(s.image||n),s.images&&Array.isArray(s.images)&&s.images.length>1?j(s.images.slice(1)):j([]),N(s.nutritionInfo&&(s.nutritionInfo.calories>0||"0g"!==s.nutritionInfo.protein||"0g"!==s.nutritionInfo.carbs||"0g"!==s.nutritionInfo.fat)||!1))},[s,a]);let y=(e,s)=>{c(a=>({...a,[e]:s}))},w=(e,s)=>{c(a=>({...a,nutritionInfo:{...a.nutritionInfo,[e]:s}}))},C=()=>{d.trim()&&(c(e=>({...e,ingredients:[...e.ingredients,d.trim()]})),m(""))},A=()=>{x.trim()&&(c(e=>({...e,allergens:[...e.allergens,x.trim()]})),u(""))};return a?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-gray-200",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Edit Dish"}),(0,r.jsx)(M.$,{variant:"ghost",size:"sm",onClick:t,children:(0,r.jsx)(L.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Basic Information"})}),(0,r.jsxs)(T.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"name",children:"Dish Name"}),(0,r.jsx)($.p,{id:"name",type:"text",value:o.name,onChange:e=>y("name",e.target.value),className:"mt-1",placeholder:"Enter dish name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"description",children:"Description"}),(0,r.jsx)(O.T,{id:"description",value:o.description,onChange:e=>y("description",e.target.value),className:"mt-1",placeholder:"Describe your dish...",rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"price",children:"Price ($)"}),(0,r.jsx)($.p,{id:"price",type:"number",step:"0.01",value:o.price,onChange:e=>y("price",e.target.value),className:"mt-1",placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"prepTime",children:"Prep Time"}),(0,r.jsx)($.p,{id:"prepTime",type:"text",value:o.prepTime,onChange:e=>y("prepTime",e.target.value),className:"mt-1",placeholder:"e.g., 30 mins"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"category",children:"Category"}),(0,r.jsxs)("select",{id:"category",value:o.category,onChange:e=>y("category",e.target.value),className:"w-full mt-1 px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,r.jsx)("option",{value:"",children:"Selecciona categor\xeda"}),(0,r.jsx)("option",{value:"Italiana",children:"Italiana"}),(0,r.jsx)("option",{value:"Mexicana",children:"Mexicana"}),(0,r.jsx)("option",{value:"Japonesa",children:"Japonesa"}),(0,r.jsx)("option",{value:"India",children:"India"}),(0,r.jsx)("option",{value:"Americana",children:"Americana"}),(0,r.jsx)("option",{value:"Francesa",children:"Francesa"}),(0,r.jsx)("option",{value:"China",children:"China"}),(0,r.jsx)("option",{value:"Tailandesa",children:"Tailandesa"}),(0,r.jsx)("option",{value:"Mediterr\xe1nea",children:"Mediterr\xe1nea"}),(0,r.jsx)("option",{value:"Vegana",children:"Vegana"}),(0,r.jsx)("option",{value:"Saludable",children:"Saludable"}),(0,r.jsx)("option",{value:"Acompa\xf1amientos",children:"Acompa\xf1amientos"}),(0,r.jsx)("option",{value:"Para Tomar",children:"Para Tomar"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"status",children:"Status"}),(0,r.jsxs)("select",{id:"status",value:o.status,onChange:e=>y("status",e.target.value),className:"w-full mt-1 px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]})]})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Im\xe1genes del Plato"})}),(0,r.jsx)(T.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:(0,r.jsx)("img",{src:0===v?h:p[v-1],alt:"Preview",className:"w-full h-full object-cover"})}),(h!==n||p.length>0)&&(0,r.jsxs)("div",{className:"flex gap-2 overflow-x-auto",children:[h!==n&&(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded border-2 cursor-pointer transition-all ".concat(0===v?"border-primary":"border-gray-200"),onClick:()=>b(0),children:[(0,r.jsx)("img",{src:h,alt:"Main",className:"w-full h-full object-cover rounded"}),(0,r.jsx)(R.E,{className:"absolute -top-2 -right-2 text-xs px-1",children:"Principal"})]}),p.map((e,s)=>(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded border-2 cursor-pointer transition-all ".concat(v===s+1?"border-primary":"border-gray-200"),onClick:()=>b(s+1),children:[(0,r.jsx)("img",{src:e,alt:"Additional ".concat(s+1),className:"w-full h-full object-cover rounded"}),(0,r.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),(e=>{j(s=>s.filter((s,a)=>a!==e)),v===e+1&&b(0)})(s)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center hover:bg-red-600",children:(0,r.jsx)(L.A,{className:"h-3 w-3"})})]},s))]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{className:"text-sm font-medium mb-1 block",children:"Imagen Principal"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(!a)return;if(a.size>5242880)return void console.error("Image too large");if(!a.type.startsWith("image/"))return void console.error("Invalid file type");let r=new FileReader;r.onload=e=>{var s;let a=null==(s=e.target)?void 0:s.result;g(a),c(e=>({...e,image:a})),b(0)},r.readAsDataURL(a)},className:"hidden",id:"main-image-upload-edit"}),(0,r.jsx)(J.J,{htmlFor:"main-image-upload-edit",className:"cursor-pointer block",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 p-3 border-2 border-dashed border-primary/50 bg-primary/5 rounded-lg hover:border-primary hover:bg-primary/10 transition-all",children:[(0,r.jsx)(Z.A,{className:"h-4 w-4 text-primary"}),(0,r.jsx)("span",{className:"text-sm",children:h===n?"Seleccionar Imagen Principal":"Cambiar Imagen Principal"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{className:"text-sm font-medium mb-1 block",children:"Im\xe1genes Adicionales"}),(0,r.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let s=e.target.files;if(!s)return;let a=[],r=0;Array.from(s).forEach(e=>{if(e.size>5242880)return void console.error("Image too large:",e.name);if(!e.type.startsWith("image/"))return void console.error("Invalid file type:",e.name);let i=new FileReader;i.onload=e=>{var i;let t=null==(i=e.target)?void 0:i.result;a.push(t),++r===s.length&&j(e=>[...e,...a].slice(0,5))},i.readAsDataURL(e)})},className:"hidden",id:"additional-images-upload-edit",disabled:p.length>=5}),(0,r.jsx)(J.J,{htmlFor:"additional-images-upload-edit",className:"cursor-pointer block ".concat(p.length>=5?"opacity-50 cursor-not-allowed":""),children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 p-3 border-2 border-dashed rounded-lg transition-all ".concat(p.length>=5?"border-gray-300 bg-gray-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"),children:[(0,r.jsx)(D.A,{className:"h-4 w-4"}),(0,r.jsxs)("span",{className:"text-sm",children:["Agregar M\xe1s Fotos (",p.length,"/5)"]})]})})]})]})]})})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Ingredients"})}),(0,r.jsxs)(T.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),className:"flex-1 px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Add ingredient",onKeyPress:e=>"Enter"===e.key&&C()}),(0,r.jsx)(M.$,{onClick:C,size:"sm",children:(0,r.jsx)(D.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"space-y-2",children:o.ingredients.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[(0,r.jsx)("span",{className:"text-sm",children:e}),(0,r.jsx)(M.$,{variant:"ghost",size:"sm",onClick:()=>{c(e=>({...e,ingredients:e.ingredients.filter((e,a)=>a!==s)}))},children:(0,r.jsx)(B.A,{className:"h-3 w-3"})})]},s))})]})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Allergens"})}),(0,r.jsxs)(T.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),className:"flex-1 px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Add allergen",onKeyPress:e=>"Enter"===e.key&&A()}),(0,r.jsx)(M.$,{onClick:A,size:"sm",children:(0,r.jsx)(D.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:o.allergens.map((e,s)=>(0,r.jsxs)(R.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,r.jsx)(M.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>{c(e=>({...e,allergens:e.allergens.filter((e,a)=>a!==s)}))},children:(0,r.jsx)(L.A,{className:"h-3 w-3"})})]},s))})]})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Nutrition Information"})}),(0,r.jsx)(T.Wu,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"calories",children:"Calories"}),(0,r.jsx)("input",{id:"calories",type:"number",value:o.nutritionInfo.calories,onChange:e=>w("calories",e.target.value),className:"w-full mt-1 px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"protein",children:"Protein"}),(0,r.jsx)("input",{id:"protein",type:"text",value:o.nutritionInfo.protein,onChange:e=>w("protein",e.target.value),className:"w-full mt-1 px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g., 25g"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"carbs",children:"Carbs"}),(0,r.jsx)("input",{id:"carbs",type:"text",value:o.nutritionInfo.carbs,onChange:e=>w("carbs",e.target.value),className:"w-full mt-1 px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g., 45g"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"fat",children:"Fat"}),(0,r.jsx)("input",{id:"fat",type:"text",value:o.nutritionInfo.fat,onChange:e=>w("fat",e.target.value),className:"w-full mt-1 px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g., 15g"})]})]})})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[(0,r.jsx)(M.$,{variant:"outline",onClick:t,children:"Cancel"}),(0,r.jsx)(M.$,{onClick:()=>{let e=[o.image,...p].filter(e=>e&&e!==n);l({...s,...o,images:e.length>1?e:void 0,price:parseFloat(o.price.toString()),nutritionInfo:f?o.nutritionInfo:{calories:0,protein:"0g",carbs:"0g",fat:"0g"}}),t()},children:"Save Changes"})]})]})]})}):null};var U=a(71007),H=a(75525),q=a(81586),V=a(4229),G=a(95784);let Y=e=>{let{isOpen:s,onClose:a,onSave:t,currentUser:l}=e,[n,o]=(0,i.useState)("profile"),[c,d]=(0,i.useState)({displayName:"",bio:"",avatar:"",coverImage:"",phone:"",location:"",deliveryRadius:5,specialties:[],languages:[],autoAcceptOrders:!1,maxOrdersPerDay:20,deliveryMode:"external",selfDeliveryFee:0,maxDeliveryDistance:5,workingHours:{start:"09:00",end:"21:00"},workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"],emailNotifications:{newOrders:!0,orderUpdates:!0,reviews:!0,promotions:!1},pushNotifications:{newOrders:!0,orderUpdates:!0,reviews:!0,promotions:!1},currency:"CLP",timezone:"America/Santiago",language:"Espa\xf1ol"}),[m,x]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[g,j]=(0,i.useState)(""),[v,b]=(0,i.useState)("");(0,i.useEffect)(()=>{if(l&&s){let e=l.settings||{};d(s=>({...s,displayName:l.displayName||"",bio:l.bio||"",avatar:l.photoURL||"",phone:l.phone||"",location:l.location||"",deliveryRadius:l.deliveryRadius||5,deliveryMode:e.selfDelivery?"self":e.deliveryMode||"external",selfDeliveryFee:e.selfDeliveryFee||0,maxDeliveryDistance:e.maxDeliveryDistance||5,autoAcceptOrders:e.autoAcceptOrders||!1,maxOrdersPerDay:e.maxOrdersPerDay||20,workingHours:e.workingHours||{start:"09:00",end:"21:00"},workingDays:e.workingDays||["monday","tuesday","wednesday","thursday","friday","saturday"],emailNotifications:e.emailNotifications||{newOrders:!0,orderUpdates:!0,promotions:!1,weeklyReports:!0},pushNotifications:e.pushNotifications||{newOrders:!0,orderUpdates:!0,messages:!0}})),j(l.photoURL||"")}},[l,s]);let N=(e,s)=>{d(a=>({...a,[e]:s}))},y=(e,s,a)=>{d(r=>({...r,[e]:{...r[e],[s]:a}}))},w=()=>{m.trim()&&!c.specialties.includes(m.trim())&&(d(e=>({...e,specialties:[...e.specialties,m.trim()]})),x(""))},C=()=>{u.trim()&&!c.languages.includes(u.trim())&&(d(e=>({...e,languages:[...e.languages,u.trim()]})),h(""))};return s?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-gray-200",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Settings"}),(0,r.jsx)(M.$,{variant:"ghost",size:"sm",onClick:a,children:(0,r.jsx)(L.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"w-64 border-r border-gray-200 p-4",children:(0,r.jsxs)("nav",{className:"space-y-2",children:[(0,r.jsxs)(M.$,{variant:"profile"===n?"default":"ghost",className:"w-full justify-start",onClick:()=>o("profile"),children:[(0,r.jsx)(U.A,{className:"h-4 w-4 mr-2"}),"Profile"]}),(0,r.jsxs)(M.$,{variant:"preferences"===n?"default":"ghost",className:"w-full justify-start",onClick:()=>o("preferences"),children:[(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Preferences"]}),(0,r.jsxs)(M.$,{variant:"notifications"===n?"default":"ghost",className:"w-full justify-start",onClick:()=>o("notifications"),children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Notifications"]}),(0,r.jsxs)(M.$,{variant:"account"===n?"default":"ghost",className:"w-full justify-start",onClick:()=>o("account"),children:[(0,r.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Account"]})]})}),(0,r.jsxs)("div",{className:"flex-1 p-6",children:["profile"===n&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Profile Information"}),(0,r.jsxs)(T.Zp,{className:"mb-6",children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Profile Picture"})}),(0,r.jsx)(T.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(z.eu,{className:"h-20 w-20",children:[(0,r.jsx)(z.BK,{src:g}),(0,r.jsx)(z.q5,{children:(0,r.jsx)(U.A,{className:"h-8 w-8"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"avatar-upload",className:"cursor-pointer",children:(0,r.jsx)(M.$,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)("span",{children:[(0,r.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"Change Photo"]})})}),(0,r.jsx)("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(a){let e=new FileReader;e.onload=e=>{var s;let a=null==(s=e.target)?void 0:s.result;j(a),d(e=>({...e,avatar:a}))},e.readAsDataURL(a)}},className:"hidden"})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"displayName",children:"Display Name"}),(0,r.jsx)("input",{id:"displayName",type:"text",value:c.displayName,onChange:e=>N("displayName",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your display name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"phone",children:"Phone Number"}),(0,r.jsx)("input",{id:"phone",type:"tel",value:c.phone,onChange:e=>N("phone",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your phone number"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)(J.J,{htmlFor:"bio",children:"Bio"}),(0,r.jsx)(O.T,{id:"bio",value:c.bio,onChange:e=>N("bio",e.target.value),className:"mt-1",placeholder:"Tell customers about yourself and your cooking...",rows:4})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"location",children:"Location"}),(0,r.jsx)("input",{id:"location",type:"text",value:c.location,onChange:e=>N("location",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your location"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"deliveryRadius",children:"Delivery Radius (km)"}),(0,r.jsx)("input",{id:"deliveryRadius",type:"number",min:"1",max:"50",value:c.deliveryRadius,onChange:e=>N("deliveryRadius",parseInt(e.target.value)),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)(T.Zp,{className:"mb-6",children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Cooking Specialties"})}),(0,r.jsxs)(T.Wu,{children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,r.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a specialty",onKeyPress:e=>"Enter"===e.key&&w()}),(0,r.jsx)(M.$,{onClick:w,size:"sm",children:"Add"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.specialties.map(e=>(0,r.jsxs)(R.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,r.jsx)(M.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>{d(s=>({...s,specialties:s.specialties.filter(s=>s!==e)}))},children:(0,r.jsx)(L.A,{className:"h-3 w-3"})})]},e))})]})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Languages"})}),(0,r.jsxs)(T.Wu,{children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,r.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a language",onKeyPress:e=>"Enter"===e.key&&C()}),(0,r.jsx)(M.$,{onClick:C,size:"sm",children:"Add"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.languages.map(e=>(0,r.jsxs)(R.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,r.jsx)(M.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>{d(s=>({...s,languages:s.languages.filter(s=>s!==e)}))},children:(0,r.jsx)(L.A,{className:"h-3 w-3"})})]},e))})]})]})]})}),"preferences"===n&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Cooking Preferences"}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Order Management"})}),(0,r.jsxs)(T.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"Auto-accept orders"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Automatically accept orders without manual approval"})]}),(0,r.jsx)("input",{type:"checkbox",checked:c.autoAcceptOrders,onChange:e=>N("autoAcceptOrders",e.target.checked),className:"h-4 w-4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"maxOrders",children:"Maximum orders per day"}),(0,r.jsx)("input",{id:"maxOrders",type:"number",min:"1",max:"100",value:c.maxOrdersPerDay,onChange:e=>N("maxOrdersPerDay",parseInt(e.target.value)),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"space-y-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(p.A,{className:"h-5 w-5 text-blue-600"}),(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"Modo de Entrega"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"deliveryMode",children:"\xbfC\xf3mo prefieres manejar las entregas?"}),(0,r.jsxs)(G.l6,{value:c.deliveryMode||"external",onValueChange:e=>N("deliveryMode",e),children:[(0,r.jsx)(G.bq,{className:"mt-2",children:(0,r.jsx)(G.yv,{placeholder:"Selecciona modo de entrega"})}),(0,r.jsxs)(G.gC,{children:[(0,r.jsx)(G.eb,{value:"self",children:"\uD83D\uDE97 Solo yo reparto - Manejo todas las entregas personalmente"}),(0,r.jsx)(G.eb,{value:"external",children:"\uD83D\uDCE6 Solo delivery externo - Los conductores de la plataforma se encargan"}),(0,r.jsx)(G.eb,{value:"both",children:"\uD83D\uDD04 Ambos - Puedo repartir yo o usar conductores externos"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Esta preferencia afectar\xe1 c\xf3mo se muestran tus platos a los clientes"})]}),("self"===c.deliveryMode||"both"===c.deliveryMode)&&(0,r.jsxs)("div",{className:"space-y-3 mt-4 p-3 bg-blue-50 rounded-md border border-blue-200",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-900",children:"Configuraci\xf3n de Entrega Personal"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"selfDeliveryFee",children:"Tarifa de entrega (CLP)"}),(0,r.jsx)($.p,{id:"selfDeliveryFee",type:"number",min:"0",step:"100",value:c.selfDeliveryFee||0,onChange:e=>N("selfDeliveryFee",parseInt(e.target.value)||0),className:"mt-1",placeholder:"ej: 2000"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Deja en 0 para entrega gratuita"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"maxDeliveryDistance",children:"Distancia m\xe1xima (km)"}),(0,r.jsx)($.p,{id:"maxDeliveryDistance",type:"number",min:"1",max:"50",value:c.maxDeliveryDistance||5,onChange:e=>N("maxDeliveryDistance",parseInt(e.target.value)||5),className:"mt-1",placeholder:"ej: 10"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\xbfQu\xe9 tan lejos puedes entregar?"})]})]}),(0,r.jsx)("div",{className:"bg-blue-100 border border-blue-300 rounded p-2",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83D\uDCA1 ",(0,r.jsx)("strong",{children:"Ventajas del reparto personal:"})," Mayor control sobre el servicio, relaci\xf3n directa con clientes, y te quedas con el 100% de la tarifa de entrega."]})})]}),"external"===c.deliveryMode&&(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:(0,r.jsx)("p",{className:"text-sm text-green-800",children:"\uD83D\uDCE6 Con delivery externo, los conductores de la plataforma se encargan de todas las entregas. T\xfa solo te enfocas en cocinar."})})]})]})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Working Hours"})}),(0,r.jsxs)(T.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"startTime",children:"Start Time"}),(0,r.jsx)("input",{id:"startTime",type:"time",value:c.workingHours.start,onChange:e=>y("workingHours","start",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"endTime",children:"End Time"}),(0,r.jsx)("input",{id:"endTime",type:"time",value:c.workingHours.end,onChange:e=>y("workingHours","end",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"Working Days"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-2",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:c.workingDays.includes(e),onChange:s=>{s.target.checked?N("workingDays",[...c.workingDays,e]):N("workingDays",c.workingDays.filter(s=>s!==e))},className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-sm capitalize",children:e})]},e))})]})]})]})]}),"notifications"===n&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Notification Preferences"}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Email Notifications"})}),(0,r.jsx)(T.Wu,{className:"space-y-4",children:Object.entries(c.emailNotifications).map(e=>{let[s,a]=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsx)(J.J,{className:"capitalize",children:s.replace(/([A-Z])/g," $1").trim()})}),(0,r.jsx)("input",{type:"checkbox",checked:a,onChange:e=>y("emailNotifications",s,e.target.checked),className:"h-4 w-4"})]},s)})})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Push Notifications"})}),(0,r.jsx)(T.Wu,{className:"space-y-4",children:Object.entries(c.pushNotifications).map(e=>{let[s,a]=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsx)(J.J,{className:"capitalize",children:s.replace(/([A-Z])/g," $1").trim()})}),(0,r.jsx)("input",{type:"checkbox",checked:a,onChange:e=>y("pushNotifications",s,e.target.checked),className:"h-4 w-4"})]},s)})})]})]}),"account"===n&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Account Settings"}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Regional Settings"})}),(0,r.jsxs)(T.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"currency",children:"Currency"}),(0,r.jsxs)("select",{id:"currency",value:c.currency,onChange:e=>N("currency",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"CLP",children:"CLP ($)"}),(0,r.jsx)("option",{value:"USD",children:"USD ($)"}),(0,r.jsx)("option",{value:"EUR",children:"EUR (€)"}),(0,r.jsx)("option",{value:"GBP",children:"GBP (\xa3)"}),(0,r.jsx)("option",{value:"CAD",children:"CAD ($)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"language",children:"Language"}),(0,r.jsxs)("select",{id:"language",value:c.language,onChange:e=>N("language",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"Espa\xf1ol",children:"Espa\xf1ol"}),(0,r.jsx)("option",{value:"English",children:"English"}),(0,r.jsx)("option",{value:"French",children:"French"}),(0,r.jsx)("option",{value:"Italian",children:"Italian"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"timezone",children:"Timezone"}),(0,r.jsxs)("select",{id:"timezone",value:c.timezone,onChange:e=>N("timezone",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"America/Santiago",children:"Santiago, Chile"}),(0,r.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,r.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,r.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,r.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Account Actions"})}),(0,r.jsxs)(T.Wu,{className:"space-y-4",children:[(0,r.jsxs)(M.$,{variant:"outline",className:"w-full",children:[(0,r.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Change Password"]}),(0,r.jsxs)(M.$,{variant:"outline",className:"w-full",children:[(0,r.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"Payment Settings"]}),(0,r.jsx)(M.$,{variant:"destructive",className:"w-full",children:"Deactivate Account"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end gap-4",children:[(0,r.jsx)(M.$,{variant:"outline",onClick:a,children:"Cancel"}),(0,r.jsxs)(M.$,{onClick:()=>{t(c),a()},children:[(0,r.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})}):null};var Q=a(81284),_=a(53999);let K=i.forwardRef((e,s)=>{let{checked:a=!1,onCheckedChange:i,disabled:t=!1,className:l,...n}=e;return(0,r.jsx)("button",{type:"button",role:"switch","aria-checked":a,ref:s,disabled:t,onClick:()=>null==i?void 0:i(!a),className:(0,_.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",a?"bg-primary":"bg-input",l),...n,children:(0,r.jsx)("span",{className:(0,_.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform",a?"translate-x-4":"translate-x-0")})})});K.displayName="Switch";var X=a(54172);function ee(e){return e.trim().replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/[\x00-\x1F\x7F]/g,"")}var es=a(95751);let ea=es.Ik({name:es.Yj().min(3,"El nombre debe tener al menos 3 caracteres").max(100,"El nombre no puede exceder 100 caracteres").regex(/^[a-zA-ZáéíóúñÁÉÍÓÚÑüÜ\s]+$/,"El nombre solo puede contener letras y espacios"),description:es.Yj().min(20,"La descripci\xf3n debe tener al menos 20 caracteres").max(500,"La descripci\xf3n no puede exceder 500 caracteres"),price:es.ai().positive("El precio debe ser mayor a 0").min(500,"El precio m\xednimo es $500 CLP").max(5e4,"El precio m\xe1ximo es $50,000 CLP").int("El precio debe ser un n\xfamero entero"),category:es.k5(["Platos principales","Acompa\xf1amientos","Bebidas"],{errorMap:()=>({message:"Selecciona una categor\xeda v\xe1lida"})}),prepTime:es.Yj().min(1,"El tiempo de preparaci\xf3n es requerido").max(50,"El tiempo de preparaci\xf3n es muy largo").regex(/^\d+\s*(min|mins|minutos?|h|hrs?|horas?)$/i,'Formato inv\xe1lido. Ej: "30 mins", "1 hora"'),ingredients:es.YO(es.Yj().min(1,"El ingrediente no puede estar vac\xedo")).min(1,"Debe tener al menos un ingrediente").max(20,"M\xe1ximo 20 ingredientes permitidos").refine(e=>e.every(e=>e.trim().length>0),"Todos los ingredientes deben tener contenido v\xe1lido"),image:es.Yj().min(1,"La imagen es requerida").refine(e=>e.startsWith("data:image/")||e.startsWith("http"),"La imagen debe ser v\xe1lida (base64 o URL)"),images:es.YO(es.Yj()).optional().refine(e=>!e||e.every(e=>e.startsWith("data:image/")||e.startsWith("http")),"Todas las im\xe1genes deben ser v\xe1lidas (base64 o URL)"),deliveryMode:es.k5(["cook","external"],{errorMap:()=>({message:"Selecciona un modo de entrega v\xe1lido"})}).optional(),deliveryFee:es.ai().min(0,"La tarifa de entrega debe ser mayor o igual a 0").optional()});function er(e){let{isOpen:s,onClose:a,onSave:t,cookerId:l,cookerName:n,cookerAvatar:o,cookerRating:c}=e,d="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNzUgMTI1SDE5NVYxNDVIMjE1VjE2NUgxOTVWMTg1SDE3NVYxNjVIMTU1VjE0NUgxNzVWMTI1WiIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4K",[m,x]=(0,i.useState)(d),[u,h]=(0,i.useState)([]),[g,p]=(0,i.useState)(0),[j,v]=(0,i.useState)(!1),[b,f]=(0,i.useState)({calories:0,protein:"0g",carbs:"0g",fat:"0g",fiber:"0g",sugar:"0g",sodium:"0mg",cholesterol:"0mg"}),{data:N,errors:y,isSubmitting:w,setValue:C,getFieldError:A,hasFieldError:k,handleSubmit:I,reset:P}=function(e){let{schema:s,initialData:a={},onSubmit:r,sanitize:t=!0}=e,[l,n]=(0,i.useState)(a),[o,c]=(0,i.useState)({}),[d,m]=(0,i.useState)(!1),{isValid:x,hasErrors:u}=(0,i.useMemo)(()=>({isValid:s.safeParse(l).success,hasErrors:Object.keys(o).length>0}),[l,o,s]),h=(0,i.useCallback)((e,s)=>{n(a=>({...a,[e]:t&&"string"==typeof s?s.trim():s})),o[e]&&c(s=>{let a={...s};return delete a[e],a})},[o,t]),g=(0,i.useCallback)(e=>{let s=t?function e(s){let a={...s};for(let s in a){let r=a[s];"string"==typeof r?a[s]=ee(r):Array.isArray(r)?a[s]=r.map(e=>"string"==typeof e?ee(e):e):"object"==typeof r&&null!==r&&(a[s]=e(r))}return a}(e):e;n(e=>({...e,...s}))},[t]),p=(0,i.useCallback)((e,s)=>{c(a=>({...a,[e]:[s]}))},[]),j=(0,i.useCallback)(e=>{c(s=>{let a={...s};return delete a[e],a})},[]),v=(0,i.useCallback)(()=>{c({})},[]),b=(0,i.useCallback)(()=>{let e=function(e,s){try{let a=e.parse(s);return{success:!0,data:a}}catch(e){if(e instanceof X.G){let s={};return e.issues.forEach(e=>{let a=e.path.join(".");s[a]||(s[a]=[]),s[a].push(e.message)}),{success:!1,errors:s,message:"Datos inv\xe1lidos. Por favor revisa los campos marcados."}}return{success:!1,message:"Error de validaci\xf3n inesperado"}}}(s,l);return!e.success&&e.errors?c(e.errors):c({}),e},[s,l]),f=(0,i.useCallback)(e=>{try{let a=s.pick({[e]:!0}),r={[e]:l[e]},i=a.safeParse(r);if(i.success)return j(e),!0;{let s=i.error.issues.filter(s=>s.path[0]===e).map(e=>e.message);if(s.length>0)return p(e,s[0]),!1}}catch(r){let a=s.safeParse(l);if(!a.success){let s=a.error.issues.filter(s=>s.path[0]===e).map(e=>e.message);if(s.length>0)return p(e,s[0]),!1}}return j(e),!0},[s,l,p,j]),N=(0,i.useCallback)(async e=>{if(e&&e.preventDefault(),!d){m(!0);try{let e=b();e.success&&e.data&&r&&(await r(e.data),n(a),c({}))}catch(e){console.error("Form submission error:",e),p("submit","Error al enviar el formulario")}finally{m(!1)}}},[d,b,r,a,p]),y=(0,i.useCallback)(()=>{n(a),c({}),m(!1)},[a]),w=(0,i.useCallback)(e=>{var s;return null==(s=o[e])?void 0:s[0]},[o]),C=(0,i.useCallback)(e=>!!(o[e]&&o[e].length>0),[o]);return{data:l,errors:o,isValid:x,isSubmitting:d,hasErrors:u,setValue:h,setData:g,setError:p,clearError:j,clearAllErrors:v,validate:b,validateField:f,handleSubmit:N,reset:y,getFieldError:w,hasFieldError:C}}({schema:ea,initialData:{name:"",description:"",price:0,category:"Platos principales",prepTime:"",ingredients:[""],image:m,images:[],deliveryMode:"cook",deliveryFee:0},onSubmit:async e=>{[e.image,...u].filter(e=>e!==d);let s={...e,image:e.image,cookerId:l,cookerName:n,cookerAvatar:o,cookerRating:c,tags:[e.category.toLowerCase(),"nuevo"],rating:0,reviewCount:0,isAvailable:!0,allergens:[],nutritionInfo:j?b:{calories:0,protein:"0g",carbs:"0g",fat:"0g"}};await t(s),z()}}),E=(e,s)=>{C(e,s)},z=()=>{P(),x(d),h([]),p(0),a()},F=e=>{let{field:s}=e,a=A(s);return a?(0,r.jsxs)("div",{className:"flex items-center gap-1 text-red-500 text-xs mt-1",children:[(0,r.jsx)(S.A,{className:"h-3 w-3"}),(0,r.jsx)("span",{children:a})]}):null};return s?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Agregar Nuevo Plato"}),(0,r.jsx)(M.$,{variant:"ghost",size:"sm",onClick:z,children:(0,r.jsx)(L.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("form",{onSubmit:I,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"name",children:"Nombre del Plato *"}),(0,r.jsx)($.p,{id:"name",type:"text",required:!0,value:N.name||"",onChange:e=>E("name",e.target.value),className:"mt-1 ".concat(k("name")?"border-red-500":""),placeholder:"Ej: Spaghetti Carbonara"}),(0,r.jsx)(F,{field:"name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"description",children:"Descripci\xf3n *"}),(0,r.jsx)(O.T,{id:"description",required:!0,value:N.description||"",onChange:e=>E("description",e.target.value),className:"w-full mt-1 ".concat(k("description")?"border-red-500":""),placeholder:"Describe tu plato de manera atractiva. Incluye sabores, ingredientes especiales, t\xe9cnica de preparaci\xf3n y qu\xe9 lo hace \xfanico...",rows:5}),(0,r.jsx)(F,{field:"description"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Tip: Una buena descripci\xf3n aumenta las ventas. Destaca lo que hace especial a tu plato."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"price",children:"Precio (CLP) *"}),(0,r.jsx)($.p,{id:"price",type:"number",required:!0,min:"0",step:"1",value:N.price||"",onChange:e=>{let s=e.target.value;if(""===s)return void E("price",0);E("price",Math.round(parseFloat(s)||0))},className:"mt-1 ".concat(k("price")?"border-red-500":""),placeholder:"10990"}),(0,r.jsx)(F,{field:"price"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"prepTime",children:"Tiempo de Preparaci\xf3n *"}),(0,r.jsx)($.p,{id:"prepTime",type:"text",required:!0,value:N.prepTime||"",onChange:e=>E("prepTime",e.target.value),className:"mt-1 ".concat(k("prepTime")?"border-red-500":""),placeholder:"25 mins"}),(0,r.jsx)(F,{field:"prepTime"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"category",children:"Categor\xeda *"}),(0,r.jsxs)(G.l6,{value:N.category||"Platos principales",onValueChange:e=>E("category",e),children:[(0,r.jsx)(G.bq,{className:k("category")?"border-red-500":"",children:(0,r.jsx)(G.yv,{placeholder:"Selecciona una categor\xeda"})}),(0,r.jsx)(G.gC,{children:["Platos principales","Acompa\xf1amientos","Bebidas"].map(e=>(0,r.jsx)(G.eb,{value:e,children:e},e))})]}),(0,r.jsx)(F,{field:"category"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"Ingredientes *"}),(0,r.jsxs)("div",{className:"space-y-2 mt-2",children:[(N.ingredients||[""]).map((e,s)=>(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)($.p,{type:"text",value:e,onChange:e=>{var a;return a=e.target.value,void C("ingredients",(N.ingredients||[""]).map((e,r)=>r===s?a:e))},className:"flex-1 ".concat(k("ingredients")?"border-red-500":""),placeholder:"Ej: Pasta fresca, tomates, queso parmesano",required:0===s}),(N.ingredients||[""]).length>1&&(0,r.jsx)(M.$,{type:"button",variant:"outline",size:"sm",onClick:()=>((e,s)=>{let a=N.ingredients||[""];a.length>1&&C(e,a.filter((e,a)=>a!==s))})("ingredients",s),children:(0,r.jsx)(B.A,{className:"h-4 w-4"})})]},s)),(0,r.jsxs)(M.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{C("ingredients",[...N.ingredients||[""],""])},className:"w-full",children:[(0,r.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Agregar Ingrediente"]})]}),(0,r.jsx)(F,{field:"ingredients"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Lista los ingredientes principales que hacen especial a tu plato."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"Modo de Entrega"}),(0,r.jsxs)(G.l6,{value:N.deliveryMode||"cook",onValueChange:e=>E("deliveryMode",e),children:[(0,r.jsx)(G.bq,{className:"mt-1",children:(0,r.jsx)(G.yv,{placeholder:"Selecciona modo de entrega"})}),(0,r.jsxs)(G.gC,{children:[(0,r.jsx)(G.eb,{value:"cook",children:"El cocinero se encarga del reparto"}),(0,r.jsx)(G.eb,{value:"external",children:"Requiere servicio de delivery externo"})]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Define si realizas el reparto o necesitas un servicio externo."})]}),"cook"===N.deliveryMode&&(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"deliveryFee",children:"Tarifa de Entrega (CLP)"}),(0,r.jsx)($.p,{id:"deliveryFee",type:"number",min:"0",step:"100",value:N.deliveryFee||"",onChange:e=>{let s=e.target.value;if(""===s)return void E("deliveryFee",0);E("deliveryFee",Math.round(parseFloat(s)||0))},className:"mt-1",placeholder:"2000"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Tarifa adicional por el servicio de entrega. Deja en 0 para entrega gratuita."})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"Im\xe1genes del Plato *"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden mb-3",children:(0,r.jsx)("img",{src:0===g?m:u[g-1],alt:"Preview",className:"w-full h-full object-cover"})}),(m!==d||u.length>0)&&(0,r.jsxs)("div",{className:"flex gap-2 mb-3 overflow-x-auto",children:[m!==d&&(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded border-2 cursor-pointer transition-all ".concat(0===g?"border-primary":"border-gray-200"),onClick:()=>p(0),children:[(0,r.jsx)("img",{src:m,alt:"Main",className:"w-full h-full object-cover rounded"}),(0,r.jsx)(R.E,{className:"absolute -top-2 -right-2 text-xs px-1",children:"Principal"})]}),u.map((e,s)=>(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded border-2 cursor-pointer transition-all ".concat(g===s+1?"border-primary":"border-gray-200"),onClick:()=>p(s+1),children:[(0,r.jsx)("img",{src:e,alt:"Additional ".concat(s+1),className:"w-full h-full object-cover rounded"}),(0,r.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h(e=>e.filter((e,a)=>a!==s)),g===s+1&&p(0)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center hover:bg-red-600",children:(0,r.jsx)(L.A,{className:"h-3 w-3"})})]},s))]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{className:"text-sm font-medium mb-1 block",children:"Imagen Principal"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(!a)return;if(a.size>5242880)return void console.error("Image too large");if(!a.type.startsWith("image/"))return void console.error("Invalid file type");let r=new FileReader;r.onload=e=>{var s;let a=null==(s=e.target)?void 0:s.result;x(a),C("image",a),p(0)},r.readAsDataURL(a)},className:"hidden",id:"main-image-upload"}),(0,r.jsx)(J.J,{htmlFor:"main-image-upload",className:"cursor-pointer block",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 p-3 border-2 border-dashed border-primary/50 bg-primary/5 rounded-lg hover:border-primary hover:bg-primary/10 transition-all",children:[(0,r.jsx)(Z.A,{className:"h-4 w-4 text-primary"}),(0,r.jsx)("span",{className:"text-sm",children:m===d?"Seleccionar Imagen Principal":"Cambiar Imagen Principal"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{className:"text-sm font-medium mb-1 block",children:"Im\xe1genes Adicionales"}),(0,r.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let s=e.target.files;if(!s)return;let a=[],r=0;Array.from(s).forEach(e=>{if(e.size>5242880)return void console.error("Image too large:",e.name);if(!e.type.startsWith("image/"))return void console.error("Invalid file type:",e.name);let i=new FileReader;i.onload=e=>{var i;let t=null==(i=e.target)?void 0:i.result;a.push(t),++r===s.length&&h(e=>[...e,...a].slice(0,5))},i.readAsDataURL(e)})},className:"hidden",id:"additional-images-upload",disabled:u.length>=5}),(0,r.jsx)(J.J,{htmlFor:"additional-images-upload",className:"cursor-pointer block ".concat(u.length>=5?"opacity-50 cursor-not-allowed":""),children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 p-3 border-2 border-dashed rounded-lg transition-all ".concat(u.length>=5?"border-gray-300 bg-gray-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"),children:[(0,r.jsx)(D.A,{className:"h-4 w-4"}),(0,r.jsxs)("span",{className:"text-sm",children:["Agregar M\xe1s Fotos (",u.length,"/5)"]})]})})]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Puedes subir hasta 6 im\xe1genes. La primera ser\xe1 la principal. Usa luz natural y muestra diferentes \xe1ngulos del plato."})]})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsxs)(T.aR,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Q.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)(J.J,{htmlFor:"nutrition-toggle",className:"text-sm font-medium",children:"Informaci\xf3n Nutricional"})]}),(0,r.jsx)(K,{checked:j,onCheckedChange:v})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Opcional: Agrega informaci\xf3n nutricional detallada de tu plato"})]}),j&&(0,r.jsx)(T.Wu,{className:"space-y-3 pt-0",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"calories",className:"text-xs",children:"Calor\xedas"}),(0,r.jsx)($.p,{id:"calories",type:"number",min:"0",value:b.calories||"",onChange:e=>f(s=>({...s,calories:parseInt(e.target.value)||0})),className:"h-8 text-sm mt-1",placeholder:"250"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"protein",className:"text-xs",children:"Prote\xedna"}),(0,r.jsx)($.p,{id:"protein",type:"text",value:b.protein,onChange:e=>f(s=>({...s,protein:e.target.value})),className:"h-8 text-sm mt-1",placeholder:"15g"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"carbs",className:"text-xs",children:"Carbohidratos"}),(0,r.jsx)($.p,{id:"carbs",type:"text",value:b.carbs,onChange:e=>f(s=>({...s,carbs:e.target.value})),className:"h-8 text-sm mt-1",placeholder:"30g"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"fat",className:"text-xs",children:"Grasas"}),(0,r.jsx)($.p,{id:"fat",type:"text",value:b.fat,onChange:e=>f(s=>({...s,fat:e.target.value})),className:"h-8 text-sm mt-1",placeholder:"10g"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"fiber",className:"text-xs",children:"Fibra"}),(0,r.jsx)($.p,{id:"fiber",type:"text",value:b.fiber,onChange:e=>f(s=>({...s,fiber:e.target.value})),className:"h-8 text-sm mt-1",placeholder:"5g"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"sugar",className:"text-xs",children:"Az\xfacar"}),(0,r.jsx)($.p,{id:"sugar",type:"text",value:b.sugar,onChange:e=>f(s=>({...s,sugar:e.target.value})),className:"h-8 text-sm mt-1",placeholder:"8g"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"sodium",className:"text-xs",children:"Sodio"}),(0,r.jsx)($.p,{id:"sodium",type:"text",value:b.sodium,onChange:e=>f(s=>({...s,sodium:e.target.value})),className:"h-8 text-sm mt-1",placeholder:"300mg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"cholesterol",className:"text-xs",children:"Colesterol"}),(0,r.jsx)($.p,{id:"cholesterol",type:"text",value:b.cholesterol,onChange:e=>f(s=>({...s,cholesterol:e.target.value})),className:"h-8 text-sm mt-1",placeholder:"20mg"})]})]})})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,r.jsx)(M.$,{type:"button",variant:"outline",onClick:z,children:"Cancelar"}),(0,r.jsx)(M.$,{type:"submit",disabled:w,children:w?"Guardando...":"Agregar Plato"})]})]})]})}):null}es.Ik({id:es.Yj().min(1,"ID del plato es requerido"),name:es.Yj().min(3,"El nombre debe tener al menos 3 caracteres").max(100,"El nombre no puede exceder 100 caracteres").optional(),description:es.Yj().min(20,"La descripci\xf3n debe tener al menos 20 caracteres").max(500,"La descripci\xf3n no puede exceder 500 caracteres").optional(),price:es.ai().positive("El precio debe ser mayor a 0").min(500,"El precio m\xednimo es $500 CLP").max(5e4,"El precio m\xe1ximo es $50,000 CLP").int("El precio debe ser un n\xfamero entero").optional(),isAvailable:es.zM().optional()}),es.Ik({query:es.Yj().max(100,"La b\xfasqueda no puede exceder 100 caracteres").optional(),category:es.k5(["Platos principales","Acompa\xf1amientos","Bebidas"]).optional(),minPrice:es.ai().min(0,"El precio m\xednimo debe ser mayor o igual a 0").optional(),maxPrice:es.ai().min(0,"El precio m\xe1ximo debe ser mayor o igual a 0").optional(),cookerId:es.Yj().optional()}).refine(e=>!e.minPrice||!e.maxPrice||e.minPrice<=e.maxPrice,{message:"El precio m\xednimo debe ser menor o igual al precio m\xe1ximo",path:["maxPrice"]});var ei=a(67133),et=a(46751),el=a(56671),en=a(13052),eo=a(5937),ec=a(34869),ed=a(55868),em=a(42355),ex=a(35317),eu=a(66579);let eh=[{id:1,title:"Informaci\xf3n Personal",description:"Cu\xe9ntanos sobre ti"},{id:2,title:"Ubicaci\xf3n de Cocina",description:"D\xf3nde preparas tus platos"},{id:3,title:"Especialidades",description:"Tus especialidades culinarias"},{id:4,title:"Configuraci\xf3n",description:"Horarios y preferencias"},{id:5,title:"Informaci\xf3n de Pago",description:"Para recibir tus ganancias"}],eg=["Italiana","Mexicana","China","Sushi","Peruana","Argentina","Vegetariana","Vegana","Panader\xeda","Reposter\xeda","Burgers","Carnes","Mediterr\xe1nea","Fusi\xf3n"],ep=[{id:"monday",label:"Lunes"},{id:"tuesday",label:"Martes"},{id:"wednesday",label:"Mi\xe9rcoles"},{id:"thursday",label:"Jueves"},{id:"friday",label:"Viernes"},{id:"saturday",label:"S\xe1bado"},{id:"sunday",label:"Domingo"}],ej=["Banco de Chile","BancoEstado","Santander","BCI","Scotiabank","Banco Falabella","Banco Ripley","Ita\xfa","BBVA","Banco Security"];function ev(e){let{onComplete:s}=e,{user:a}=(0,t.A)(),[l,n]=(0,i.useState)(1),[o,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(!1),[x,u]=(0,i.useState)({displayName:(null==a?void 0:a.displayName)||"",phone:"",bio:"",businessType:"particular",location:{street:""},specialties:[],customSpecialty:"",workingHours:{start:"08:00",end:"20:00"},workingDays:["monday","tuesday","wednesday","thursday","friday"],languages:["Espa\xf1ol"],selfDelivery:!1,bankInfo:{accountHolderName:(null==a?void 0:a.displayName)||"",bankName:"",accountNumber:"",routingNumber:""}}),g=(e,s)=>{u(a=>({...a,[e]:s}))},j=(e,s,a)=>{u(r=>({...r,[e]:{...r[e]||{},[s]:a}}))},v=e=>{u(s=>({...s,specialties:s.specialties.includes(e)?s.specialties.filter(s=>s!==e):[...s.specialties,e]}))},f=()=>{x.customSpecialty.trim()&&!x.specialties.includes(x.customSpecialty.trim())&&(u(e=>({...e,specialties:[...e.specialties,e.customSpecialty.trim()],customSpecialty:""})),m(!1),el.oR.success("Especialidad agregada exitosamente"))},N=e=>{switch(e){case 1:return!!(x.displayName&&x.phone&&x.bio&&x.businessType);case 2:return!!x.location.street;case 3:return x.specialties.length>0;case 4:return x.workingDays.length>0;case 5:return!!(x.bankInfo.accountHolderName&&x.bankInfo.bankName&&x.bankInfo.accountNumber&&x.bankInfo.routingNumber);default:return!0}},y=async()=>{if(a){c(!0);try{var e,r;let i=ex.Dc.now(),t={displayName:x.displayName,email:a.email||"",avatar:a.photoURL||"",coverImage:"",bio:x.bio,story:"",location:{coordinates:{latitude:(null==(e=x.location.coordinates)?void 0:e.latitude)||0,longitude:(null==(r=x.location.coordinates)?void 0:r.longitude)||0,timestamp:i},address:{street:x.location.street,city:"",state:"",zipCode:"",country:"Chile",fullAddress:x.location.street},isActive:!0,lastUpdated:i},deliveryRadius:10,rating:5,reviewCount:0,totalOrders:0,yearsExperience:1,joinedDate:new Date().toISOString().split("T")[0],specialties:x.specialties,certifications:[],languages:["Espa\xf1ol"],cookingStyle:"Casera",favoriteIngredients:[],achievements:[],bankInfo:{accountHolderName:x.bankInfo.accountHolderName,bankName:x.bankInfo.bankName,accountNumber:x.bankInfo.accountNumber,routingNumber:x.bankInfo.routingNumber},settings:{autoAcceptOrders:!1,maxOrdersPerDay:20,workingHours:x.workingHours,workingDays:x.workingDays,currency:"CLP",timezone:"America/Santiago",language:"es",lastLocationUpdate:i,selfDelivery:x.selfDelivery}};await et.CooksService.createCookProfileWithId(a.uid,t);try{await (0,ex.BN)((0,ex.doc)(eu.db,"users",a.uid),{role:"Cooker",email:a.email,displayName:a.displayName||x.displayName,photoURL:a.photoURL},{merge:!0}),el.oR.success("\xa1Perfil de cocinero creado exitosamente! Bienvenido a tu dashboard.")}catch(e){console.error("Role update error:",e),el.oR.success("\xa1Perfil de cocinero creado exitosamente!")}s()}catch(e){console.error("Error creating cook profile:",e),el.oR.error("Error al crear el perfil. Int\xe9ntalo de nuevo.")}finally{c(!1)}}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,r.jsxs)("div",{className:"bg-white rounded-t-xl p-6 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\xa1Bienvenido a Moai! \uD83C\uDF7D️"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Configuremos tu perfil de cocinero"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(A.A,{className:"h-8 w-8 text-orange-500"})})]}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:eh.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 ".concat(l>=e.id?"bg-orange-500 border-orange-500 text-white":"border-gray-300 text-gray-400"),children:l>e.id?(0,r.jsx)(b.A,{className:"h-5 w-5"}):(0,r.jsx)("span",{className:"text-sm font-medium",children:e.id})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium ".concat(l>=e.id?"text-orange-600":"text-gray-400"),children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),s<eh.length-1&&(0,r.jsx)(en.A,{className:"h-5 w-5 text-gray-300 mx-4"})]},e.id))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-b-xl p-8",children:[1===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Informaci\xf3n Personal"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Cu\xe9ntanos qui\xe9n eres y qu\xe9 te apasiona de la cocina"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"displayName",children:"Tu nombre o el de tu restaurante *"}),(0,r.jsx)($.p,{id:"displayName",value:x.displayName,onChange:e=>g("displayName",e.target.value),placeholder:"Tu nombre como aparecer\xe1 en los pedidos"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"phone",children:"N\xfamero de tel\xe9fono *"}),(0,r.jsx)($.p,{id:"phone",value:x.phone,onChange:e=>g("phone",e.target.value),placeholder:"+56 9 1234 5678"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{className:"text-base font-medium mb-4 block",children:"Tipo de cocina *"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(T.Zp,{className:"cursor-pointer transition-all duration-200 ".concat("particular"===x.businessType?"ring-2 ring-moai-orange bg-orange-50 border-moai-orange":"hover:shadow-md border-gray-200"),onClick:()=>g("businessType","particular"),children:(0,r.jsxs)(T.Wu,{className:"p-6 text-center",children:[(0,r.jsx)(U.A,{className:"h-12 w-12 mx-auto mb-4 ".concat("particular"===x.businessType?"text-moai-orange":"text-gray-500")}),(0,r.jsx)("h3",{className:"font-bold text-lg mb-2 ".concat("particular"===x.businessType?"text-moai-orange":"text-gray-800"),children:"Cocinero Particular"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Cocino desde mi hogar para compartir recetas familiares y caseras"}),"particular"===x.businessType&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(b.A,{className:"h-6 w-6 text-moai-orange mx-auto"})})]})}),(0,r.jsx)(T.Zp,{className:"cursor-pointer transition-all duration-200 ".concat("restaurant"===x.businessType?"ring-2 ring-moai-orange bg-orange-50 border-moai-orange":"hover:shadow-md border-gray-200"),onClick:()=>g("businessType","restaurant"),children:(0,r.jsxs)(T.Wu,{className:"p-6 text-center",children:[(0,r.jsx)(eo.A,{className:"h-12 w-12 mx-auto mb-4 ".concat("restaurant"===x.businessType?"text-moai-orange":"text-gray-500")}),(0,r.jsx)("h3",{className:"font-bold text-lg mb-2 ".concat("restaurant"===x.businessType?"text-moai-orange":"text-gray-800"),children:"Restaurante"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Represento un restaurante o negocio gastron\xf3mico establecido"}),"restaurant"===x.businessType&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(b.A,{className:"h-6 w-6 text-moai-orange mx-auto"})})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"bio",children:"Cu\xe9ntanos sobre ti *"}),(0,r.jsx)(O.T,{id:"bio",value:x.bio,onChange:e=>g("bio",e.target.value),placeholder:"Describe tu experiencia culinaria, tu pasi\xf3n por la cocina, y qu\xe9 hace especial tu comida...",rows:4}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Esta informaci\xf3n aparecer\xe1 en tu perfil p\xfablico"})]})]}),2===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ubicaci\xf3n de tu Cocina"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Necesitamos saber d\xf3nde preparas tus deliciosos platos"})]}),(0,r.jsx)(T.Zp,{className:"bg-blue-50 border-blue-200",children:(0,r.jsx)(T.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(h.A,{className:"h-5 w-5 text-blue-600"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"\xbfPor qu\xe9 necesitamos tu ubicaci\xf3n?"}),(0,r.jsx)("p",{className:"text-xs text-blue-600",children:"Para calcular tiempos de entrega y mostrar tus platos a clientes cercanos"})]}),(0,r.jsxs)(M.$,{variant:"outline",size:"sm",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{j("location","coordinates",{latitude:e.coords.latitude,longitude:e.coords.longitude}),el.oR.success("Ubicaci\xf3n obtenida exitosamente")},e=>{console.error("Error getting location:",e),el.oR.error("No se pudo obtener la ubicaci\xf3n")}):el.oR.error("Geolocalizaci\xf3n no soportada en este navegador")},children:[(0,r.jsx)(ec.A,{className:"h-4 w-4 mr-2"}),"Obtener ubicaci\xf3n"]})]})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"street",children:"Direcci\xf3n de la cocina *"}),(0,r.jsx)($.p,{id:"street",value:x.location.street,onChange:e=>j("location","street",e.target.value),placeholder:"Calle, n\xfamero, departamento, ciudad, regi\xf3n"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Incluye todos los detalles de la direcci\xf3n (calle, n\xfamero, comuna, ciudad, regi\xf3n)"})]})]}),3===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Especialidades Culinarias"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Selecciona tus especialidades gastron\xf3micas"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"Especialidades culinarias *"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Selecciona todas las que apliquen"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[eg.map(e=>(0,r.jsx)(R.E,{variant:x.specialties.includes(e)?"default":"outline",className:"cursor-pointer text-center justify-center py-2 ".concat(x.specialties.includes(e)?"bg-orange-500 hover:bg-orange-600":"hover:bg-gray-100"),onClick:()=>v(e),children:e},e)),x.specialties.filter(e=>!eg.includes(e)).map(e=>(0,r.jsx)(R.E,{variant:"default",className:"cursor-pointer text-center justify-center py-2 bg-green-500 hover:bg-green-600",onClick:()=>v(e),children:e},e)),(0,r.jsx)(R.E,{variant:"outline",className:"cursor-pointer text-center justify-center py-2 border-dashed border-2 hover:bg-gray-50",onClick:()=>m(!0),children:"+ Otro"})]}),d&&(0,r.jsx)(T.Zp,{className:"p-4 bg-gray-50",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(J.J,{htmlFor:"customSpecialty",children:"Agregar especialidad personalizada"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)($.p,{id:"customSpecialty",value:x.customSpecialty,onChange:e=>g("customSpecialty",e.target.value),placeholder:"Ej: Cocina Molecular, Cocina Nikkei...",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),f())}}),(0,r.jsx)(M.$,{onClick:f,size:"sm",children:"Agregar"}),(0,r.jsx)(M.$,{onClick:()=>{m(!1),g("customSpecialty","")},variant:"outline",size:"sm",children:"Cancelar"})]})]})})]})]}),4===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Configuraci\xf3n de Trabajo"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Define tus horarios y preferencias de trabajo"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"Hora de inicio"}),(0,r.jsx)($.p,{type:"time",value:x.workingHours.start,onChange:e=>j("workingHours","start",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"Hora de cierre"}),(0,r.jsx)($.p,{type:"time",value:x.workingHours.end,onChange:e=>j("workingHours","end",e.target.value)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{children:"D\xedas de trabajo *"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:ep.map(e=>(0,r.jsx)(R.E,{variant:x.workingDays.includes(e.id)?"default":"outline",className:"cursor-pointer text-center justify-center py-2 ".concat(x.workingDays.includes(e.id)?"bg-green-500 hover:bg-green-600":"hover:bg-gray-100"),onClick:()=>{var s;return s=e.id,void u(e=>({...e,workingDays:e.workingDays.includes(s)?e.workingDays.filter(e=>e!==s):[...e.workingDays,s]}))},children:e.label},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{className:"text-lg font-semibold mb-4 block",children:"\xbfEntregas tus propios pedidos? \uD83D\uDE9A"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(T.Zp,{className:"cursor-pointer transition-all duration-200 ".concat(x.selfDelivery?"hover:shadow-md border-gray-200":"ring-2 ring-orange-500 bg-orange-50 border-orange-500"),onClick:()=>g("selfDelivery",!1),children:(0,r.jsxs)(T.Wu,{className:"p-6 text-center",children:[(0,r.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-4 ".concat(x.selfDelivery?"text-gray-500":"text-orange-500")}),(0,r.jsx)("h3",{className:"font-bold text-lg mb-2 ".concat(x.selfDelivery?"text-gray-800":"text-orange-500"),children:"Solo Cocinar"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Me enfoco en cocinar, otros conductores entregas mis pedidos"}),(0,r.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["• M\xe1s tiempo para cocinar",(0,r.jsx)("br",{}),"• Mayor volumen de pedidos",(0,r.jsx)("br",{}),"• Sin preocupaci\xf3n por entregas"]}),!x.selfDelivery&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(b.A,{className:"h-6 w-6 text-orange-500 mx-auto"})})]})}),(0,r.jsx)(T.Zp,{className:"cursor-pointer transition-all duration-200 ".concat(x.selfDelivery?"ring-2 ring-green-500 bg-green-50 border-green-500":"hover:shadow-md border-gray-200"),onClick:()=>g("selfDelivery",!0),children:(0,r.jsxs)(T.Wu,{className:"p-6 text-center",children:[(0,r.jsxs)("div",{className:"flex justify-center items-center mb-4",children:[(0,r.jsx)(A.A,{className:"h-8 w-8 mr-2 ".concat(x.selfDelivery?"text-green-500":"text-gray-500")}),(0,r.jsx)(p.A,{className:"h-8 w-8 ".concat(x.selfDelivery?"text-green-500":"text-gray-500")})]}),(0,r.jsx)("h3",{className:"font-bold text-lg mb-2 ".concat(x.selfDelivery?"text-green-500":"text-gray-800"),children:"Cocinar y Entregar"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Cocino y entrego mis propios pedidos para ganar m\xe1s"}),(0,r.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["• Ganancias adicionales por entrega",(0,r.jsx)("br",{}),"• Control total del servicio",(0,r.jsx)("br",{}),"• Contacto directo con clientes"]}),x.selfDelivery&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(b.A,{className:"h-6 w-6 text-green-500 mx-auto"})})]})})]}),x.selfDelivery&&(0,r.jsx)(T.Zp,{className:"mt-4 bg-blue-50 border-blue-200",children:(0,r.jsx)(T.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(ed.A,{className:"h-5 w-5 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"\xa1Gana m\xe1s dinero!"}),(0,r.jsx)("p",{className:"text-xs text-blue-600",children:"Adem\xe1s del pago por cocinar, recibir\xe1s el valor de la entrega por cada pedido que lleves"})]})]})})})]})]}),5===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Informaci\xf3n de Pago"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Para depositar tus ganancias de forma segura"})]}),(0,r.jsx)(T.Zp,{className:"bg-green-50 border-green-200",children:(0,r.jsx)(T.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(ed.A,{className:"h-5 w-5 text-green-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Pagos semanales"}),(0,r.jsx)("p",{className:"text-xs text-green-600",children:"Recibe tus ganancias cada viernes directamente en tu cuenta"})]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"accountHolderName",children:"Nombre del titular *"}),(0,r.jsx)($.p,{id:"accountHolderName",value:x.bankInfo.accountHolderName,onChange:e=>j("bankInfo","accountHolderName",e.target.value),placeholder:"Nombre completo como aparece en la cuenta"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"bankName",children:"Banco *"}),(0,r.jsxs)(G.l6,{onValueChange:e=>j("bankInfo","bankName",e),children:[(0,r.jsx)(G.bq,{className:"bg-white",children:(0,r.jsx)(G.yv,{placeholder:"Selecciona tu banco"})}),(0,r.jsx)(G.gC,{className:"bg-white border shadow-lg",children:ej.map(e=>(0,r.jsx)(G.eb,{value:e,className:"bg-white hover:bg-gray-50 text-gray-900",children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"accountNumber",children:"N\xfamero de cuenta *"}),(0,r.jsx)($.p,{id:"accountNumber",value:x.bankInfo.accountNumber,onChange:e=>j("bankInfo","accountNumber",e.target.value),placeholder:"N\xfamero de cuenta corriente"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"routingNumber",children:"RUT *"}),(0,r.jsx)($.p,{id:"routingNumber",value:x.bankInfo.routingNumber,onChange:e=>j("bankInfo","routingNumber",e.target.value),placeholder:"12.345.678-9"})]})]}),(0,r.jsx)(T.Zp,{className:"bg-blue-50 border-blue-200",children:(0,r.jsx)(T.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(H.A,{className:"h-5 w-5 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Tu informaci\xf3n est\xe1 protegida"}),(0,r.jsx)("p",{className:"text-xs text-blue-600",children:"Usamos encriptaci\xf3n bancaria para proteger tus datos financieros"})]})]})})})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t",children:[(0,r.jsxs)(M.$,{variant:"outline",onClick:()=>{n(e=>Math.max(e-1,1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:1===l,children:[(0,r.jsx)(em.A,{className:"h-4 w-4 mr-2"}),"Anterior"]}),l<eh.length?(0,r.jsxs)(M.$,{onClick:()=>{N(l)?(n(e=>Math.min(e+1,eh.length)),window.scrollTo({top:0,behavior:"smooth"})):el.oR.error("Por favor completa todos los campos requeridos")},disabled:!N(l),children:["Siguiente",(0,r.jsx)(en.A,{className:"h-4 w-4 ml-2"})]}):(0,r.jsx)(M.$,{onClick:y,disabled:o||!N(l),className:"bg-orange-500 hover:bg-orange-600",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando perfil..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"\xa1Completar registro!"]})})]})]})]})})}var eb=a(70977),ef=a(27414),eN=a(81497),ey=a(46561),ew=a(29344),eC=a(13439);function eA(e){let{className:s}=e,{user:a}=(0,t.A)(),[l,n]=(0,i.useState)([]),[o,c]=(0,i.useState)(!0),[d,m]=(0,i.useState)(new Set),[x,u]=(0,i.useState)({}),[p,j]=(0,i.useState)({});(0,i.useEffect)(()=>{if(null==a?void 0:a.uid)return et.OrdersService.subscribeToOrdersByCook(a.uid,e=>{let s=e.filter(e=>"pending_approval"===e.status);n(s),s.forEach(e=>{p[e.id]||j(s=>({...s,[e.id]:30}))}),c(!1)})},[null==a?void 0:a.uid]);let v=async e=>{if(!(null==a?void 0:a.uid))return;let s=p[e]||30;m(s=>new Set(s).add(e));try{if(await eb.n.approveOrder(e,a.uid,s)){let a=l.find(s=>s.id===e),r=(null==a?void 0:a.paymentMethod)==="card"?"El pago digital ha sido procesado.":"Cobrar en efectivo al entregar.";el.oR.success("\xa1Orden aprobada!",{description:"La orden ha sido aceptada. ".concat(r," Tiempo estimado: ").concat(s," min."),duration:5e3})}else throw Error("Failed to approve order")}catch(e){console.error("Error approving order:",e),el.oR.error("Error al aprobar la orden. Intenta nuevamente.")}finally{m(s=>{let a=new Set(s);return a.delete(e),a})}},f=async e=>{if(!(null==a?void 0:a.uid))return;let s=x[e]||"";if(!s.trim())return void el.oR.error("Por favor, proporciona una raz\xf3n para el rechazo.");m(s=>new Set(s).add(e));try{if(await eb.n.rejectOrder(e,a.uid,s)){let s=l.find(s=>s.id===e),a=(null==s?void 0:s.paymentMethod)==="card"?" El reembolso se procesar\xe1 autom\xe1ticamente.":"";el.oR.success("Orden rechazada",{description:"Se ha notificado al cliente sobre el rechazo.".concat(a),duration:5e3}),u(s=>{let a={...s};return delete a[e],a}),j(s=>{let a={...s};return delete a[e],a})}else throw Error("Failed to reject order")}catch(e){console.error("Error rejecting order:",e),el.oR.error("Error al rechazar la orden. Intenta nuevamente.")}finally{m(s=>{let a=new Set(s);return a.delete(e),a})}};return o?(0,r.jsxs)(T.Zp,{className:s,children:[(0,r.jsx)(T.aR,{children:(0,r.jsxs)(T.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(C.A,{className:"h-5 w-5 text-orange-500"}),"\xd3rdenes Pendientes de Aprobaci\xf3n"]})}),(0,r.jsx)(T.Wu,{children:(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):0===l.length?(0,r.jsxs)(T.Zp,{className:s,children:[(0,r.jsxs)(T.aR,{children:[(0,r.jsxs)(T.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(ef.A,{className:"h-5 w-5 text-orange-500"}),"\xd3rdenes Pendientes de Aprobaci\xf3n"]}),(0,r.jsx)(T.BT,{children:"\xd3rdenes con pago en efectivo que requieren tu aprobaci\xf3n"})]}),(0,r.jsx)(T.Wu,{children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(b.A,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No hay \xf3rdenes pendientes"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Todas las \xf3rdenes en efectivo han sido procesadas."})]})})]}):(0,r.jsxs)(T.Zp,{className:s,children:[(0,r.jsxs)(T.aR,{children:[(0,r.jsxs)(T.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(C.A,{className:"h-5 w-5 text-orange-500"}),"\xd3rdenes Pendientes de Aprobaci\xf3n",(0,r.jsx)(R.E,{variant:"destructive",className:"ml-auto",children:l.length})]}),(0,r.jsx)(T.BT,{children:"Revisa y aprueba \xf3rdenes (pago digital y efectivo). Define tiempo de preparaci\xf3n."})]}),(0,r.jsx)(T.Wu,{className:"space-y-4",children:l.map(e=>{var s,a;return(0,r.jsx)(T.Zp,{className:"border-orange-200 bg-orange-50/50",children:(0,r.jsxs)(T.Wu,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-orange-500 text-white p-2 rounded-full",children:(0,r.jsx)(k.A,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-medium text-foreground",children:["Orden #",e.id.slice(-6).toUpperCase()]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,ew.m)(e.createdAt.toDate(),{addSuffix:!0,locale:eC.es})})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-orange-600",children:(0,_.$g)(e.total)}),(0,r.jsx)(R.E,{variant:"outline",className:"".concat("card"===e.paymentMethod?"border-blue-300 text-blue-700 bg-blue-50":"border-orange-300 text-orange-700 bg-orange-50"),children:"card"===e.paymentMethod?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.A,{className:"h-3 w-3 mr-1"}),"Pago Digital"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ef.A,{className:"h-3 w-3 mr-1"}),"Pago en Efectivo"]})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(U.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"font-medium",children:e.customerName})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-sm",children:e.deliveryInfo.phone})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Direcci\xf3n de entrega:"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:e.deliveryInfo.address})]})]})})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h5",{className:"font-medium mb-2",children:"Platos pedidos:"}),(0,r.jsx)("div",{className:"space-y-1",children:e.dishes.map((e,s)=>(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,r.jsxs)("span",{children:[e.quantity,"x ",e.dishName]}),(0,r.jsx)("span",{className:"font-medium",children:(0,_.$g)(e.price*e.quantity)})]},s))}),(0,r.jsx)("div",{className:"border-t pt-2 mt-2",children:(0,r.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,r.jsx)("span",{children:"Total a cobrar:"}),(0,r.jsx)("span",{children:(0,_.$g)(e.total)})]})})]}),e.deliveryInfo.instructions&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(eN.A,{className:"h-4 w-4 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-blue-900",children:"Instrucciones especiales:"}),(0,r.jsx)("div",{className:"text-sm text-blue-700",children:e.deliveryInfo.instructions})]})]})}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(ey.A,{className:"h-4 w-4 text-green-600"}),(0,r.jsx)(J.J,{className:"text-sm font-medium text-green-900",children:"Tiempo estimado de preparaci\xf3n:"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)(G.l6,{value:(null==(s=p[e.id])?void 0:s.toString())||"30",onValueChange:s=>{var a,r;return a=e.id,r=parseInt(s),void j(e=>({...e,[a]:r}))},children:[(0,r.jsx)(G.bq,{className:"bg-white border-green-300 focus:border-green-500 focus:ring-green-200",children:(0,r.jsx)(G.yv,{placeholder:"Seleccionar tiempo"})}),(0,r.jsxs)(G.gC,{className:"z-50 bg-white shadow-lg border border-green-200 backdrop-blur-sm",children:[(0,r.jsx)(G.eb,{value:"15",className:"focus:bg-green-50 focus:text-green-900",children:"15 minutos"}),(0,r.jsx)(G.eb,{value:"20",className:"focus:bg-green-50 focus:text-green-900",children:"20 minutos"}),(0,r.jsx)(G.eb,{value:"25",className:"focus:bg-green-50 focus:text-green-900",children:"25 minutos"}),(0,r.jsx)(G.eb,{value:"30",className:"focus:bg-green-50 focus:text-green-900",children:"30 minutos"}),(0,r.jsx)(G.eb,{value:"40",className:"focus:bg-green-50 focus:text-green-900",children:"40 minutos"}),(0,r.jsx)(G.eb,{value:"45",className:"focus:bg-green-50 focus:text-green-900",children:"45 minutos"}),(0,r.jsx)(G.eb,{value:"60",className:"focus:bg-green-50 focus:text-green-900",children:"1 hora"}),(0,r.jsx)(G.eb,{value:"75",className:"focus:bg-green-50 focus:text-green-900",children:"1 hora 15 min"}),(0,r.jsx)(G.eb,{value:"90",className:"focus:bg-green-50 focus:text-green-900",children:"1 hora 30 min"}),(0,r.jsx)(G.eb,{value:"120",className:"focus:bg-green-50 focus:text-green-900",children:"2 horas"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-700",children:[(0,r.jsx)(k.A,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:["Entrega aprox: ",new Date(Date.now()+6e4*(p[e.id]||30)).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J.J,{htmlFor:"rejection-reason-".concat(e.id),className:"text-sm font-medium",children:"Raz\xf3n de rechazo (opcional, pero recomendado):"}),(0,r.jsx)(O.T,{id:"rejection-reason-".concat(e.id),placeholder:"Ej: No tengo todos los ingredientes disponibles...",value:x[e.id]||"",onChange:s=>{var a,r;return a=e.id,r=s.target.value,void u(e=>({...e,[a]:r}))},className:"mt-1",rows:2})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(M.$,{onClick:()=>v(e.id),disabled:d.has(e.id),className:"flex-1 bg-green-600 hover:bg-green-700",children:[d.has(e.id)?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,r.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Aprobar Orden"]}),(0,r.jsxs)(M.$,{onClick:()=>f(e.id),disabled:d.has(e.id)||!(null==(a=x[e.id])?void 0:a.trim()),variant:"destructive",className:"flex-1",children:[d.has(e.id)?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,r.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Rechazar"]})]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(S.A,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm text-yellow-700",children:[(0,r.jsx)("strong",{children:"Importante:"})," Una vez aprobada la orden, el cliente esperar\xe1 que comiences la preparaci\xf3n.","card"===e.paymentMethod&&(0,r.jsx)("span",{children:" Para pagos digitales, el dinero se liberar\xe1 autom\xe1ticamente."}),"cash_on_delivery"===e.paymentMethod&&(0,r.jsx)("span",{children:" Para pagos en efectivo, cobrar al momento de la entrega."})," ","Si la rechazas, se le notificar\xe1 inmediatamente","card"===e.paymentMethod&&" y se procesar\xe1 el reembolso","."]})]})})]})},e.id)})})]})}var ek=a(23015);let eD="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNSAxNUMzMC41MjI5IDE1IDM1IDEwLjUyMjkgMzUgNUMzNSAyLjc5MDg2IDMzLjIwOTEgMSAzMSAxSDIwQzE3LjI5MDkgMSAxNS40NjA5IDIuNzkwODYgMTUgNUMxNSAxMC41MjI5IDE5LjQ3NzEgMTUgMjUgMTVaIiBmaWxsPSIjOUI5QkEzIi8+CjxwYXRoIGQ9Ik0xMCAzNUMxMCAyNi43MTU3IDE2LjcxNTcgMjAgMjUgMjBDMzMuMjg0MyAyMCA0MCAyNi43MTU3IDQwIDM1VjQ1SDBWMzVaIiBmaWxsPSIjOUI5QkEzIi8+Cjwvc3ZnPgo=";function eI(){var e,s,a,L,Z,B,J,$;let{user:O,role:U,loading:H,logout:q}=(0,t.A)(),V=(0,l.useRouter)(),G=(0,l.useSearchParams)(),[Q,_]=(0,i.useState)("overview"),[K,X]=(0,i.useState)(null),[ee,es]=(0,i.useState)(!1),[ea,en]=(0,i.useState)(!1),[eo,ec]=(0,i.useState)(!1),[ed,em]=(0,i.useState)(!1),[eu,eh]=(0,i.useState)(!1),[eg,ep]=(0,i.useState)(!1),[ej,eb]=(0,i.useState)([]),[ef,eN]=(0,i.useState)([]),[ey,ew]=(0,i.useState)(null),[eC,eI]=(0,i.useState)({totalEarnings:0,activeDishes:0,pendingOrders:0,averageRating:0}),[eS,eP]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{if(H||!(null==O?void 0:O.uid))return console.log("Dashboard: Waiting for auth to complete...",{authLoading:H,userUid:null==O?void 0:O.uid});if(void 0===U)return console.log("Dashboard: Role is undefined, waiting for role determination...");console.log("Dashboard: Auth ready, loading profile...",{user:O.email,role:U,authLoading:H}),eP(!0);try{var e,s,a,r,i,t,l;let n=await et.CooksService.getCookById(O.uid);if(!n){console.log("Dashboard: No cook profile found, showing onboarding"),eh(!0),eP(!1);return}let o=[];n.displayName||o.push("displayName"),(null==(e=n.specialties)?void 0:e.length)||o.push("specialties"),(null==(a=n.settings)||null==(s=a.workingDays)?void 0:s.length)||o.push("settings.workingDays");let c=[];if((null==(i=n.location)||null==(r=i.address)?void 0:r.street)||c.push("location.address.street"),(null==(l=n.location)||null==(t=l.address)?void 0:t.city)||c.push("location.address.city"),n.cookingStyle||c.push("cookingStyle"),0!==o.length){console.log("Dashboard: Profile incomplete, missing essential fields:",o),console.log("Dashboard: Optional missing fields (profile can be completed later):",c),eh(!0),eP(!1);return}c.length>0&&console.log("Dashboard: Profile could be improved by completing:",c),ew(n),ep(!0);let d=await et.DishesService.getDishesByCook(O.uid);eb(d);let m=await et.OrdersService.getOrdersByCook(O.uid);eN(m);let x=await et.AnalyticsService.getCookStats(O.uid);eI(x)}catch(e){console.error("Error loading dashboard data:",e)}finally{eP(!1)}})()},[null==O?void 0:O.uid,H,U]);let eE=(0,i.useCallback)(async(e,s)=>{try{await et.OrdersService.updateOrderStatus(e,s);let a="accepted"===s?"aceptado":"rechazado",r="accepted"===s?"✅":"❌";el.oR.success("".concat(r," Pedido ").concat(a),{description:"El pedido #".concat(e.slice(-8)," ha sido ").concat(a," exitosamente.")}),console.log("Pedido ".concat(e," ").concat(a," desde email")),_("orders"),V.replace("/cooker/dashboard")}catch(e){console.error("Error ".concat("accepted"===s?"accepting":"rejecting"," order:"),e),el.oR.error("Error al procesar el pedido",{description:"No se pudo actualizar el estado del pedido. Int\xe9ntalo de nuevo."})}},[V]);(0,i.useEffect)(()=>{let e=null==G?void 0:G.get("confirm"),s=null==G?void 0:G.get("reject");e&&(null==O?void 0:O.uid)?eE(e,"accepted"):s&&(null==O?void 0:O.uid)&&eE(s,"rejected")},[G,null==O?void 0:O.uid,eE]),(0,i.useEffect)(()=>{if(null==O?void 0:O.uid)return et.OrdersService.subscribeToOrderUpdates(O.uid,e=>{eN(e)})},[null==O?void 0:O.uid]);let eM=e=>{X(e),es(!0)},eT=async e=>{if(null==K?void 0:K.id)try{if(await et.DishesService.updateDish(K.id,e)){let e=await et.DishesService.getDishesByCook((null==O?void 0:O.uid)||"");eb(e),console.log("Dish updated successfully")}}catch(e){console.error("Error updating dish:",e)}finally{es(!1),X(null)}},eR=async(e,s)=>{try{var a;if("accepted"===s&&(null==ey||null==(a=ey.settings)?void 0:a.selfDelivery)&&ef.find(s=>s.id===e)){await et.OrdersService.updateOrder(e,{status:s,driverId:null==O?void 0:O.uid,isSelfDelivery:!0}),console.log("Order accepted with self-delivery");return}await et.OrdersService.updateOrderStatus(e,s)&&console.log("Order status updated successfully")}catch(e){console.error("Error updating order status:",e)}},ez=async e=>{if(null==O?void 0:O.uid)try{let s=await et.DishesService.createDish(e);if(s){console.log("Dish added successfully with ID:",s),ek.VK.invalidateCache(s,O.uid),console.log("Cache invalidated for new dish"),console.log("Refreshing dishes list after adding new dish...");try{let e=await et.DishesService.getDishesByCook(O.uid);eb(e),console.log("Successfully refreshed dishes using indexed query")}catch(e){console.warn("Index not available, using fallback method:",e);try{let e=await et.DishesService.getDishesByCookFallback(O.uid);eb(e),console.log("Successfully refreshed dishes using fallback method")}catch(e){console.error("Both indexed and fallback methods failed:",e),window.location.reload()}}try{let e=await et.AnalyticsService.getCookStats(O.uid);eI(e)}catch(e){console.warn("Error refreshing stats:",e),eI(e=>({...e,activeDishes:e.activeDishes+1}))}}}catch(e){console.error("Error adding dish:",e),alert("Error al agregar el plato. Por favor, intenta de nuevo.")}},eF=async(e,s)=>{try{if(await et.DishesService.updateDish(e,{isAvailable:s})){if(eb(a=>a.map(a=>a.id===e?{...a,isAvailable:s}:a)),null==O?void 0:O.uid){let e=await et.AnalyticsService.getCookStats(O.uid);eI(e)}console.log("Dish ".concat(s?"activated":"deactivated"," successfully"))}}catch(e){console.error("Error updating dish availability:",e)}},eL=async e=>{if((null==O?void 0:O.uid)&&0!==ej.length){em(!0);try{let s=ej.map(s=>et.DishesService.updateDish(s.id,{isAvailable:e})),a=(await Promise.all(s)).filter(Boolean).length;if(a>0){eb(s=>s.map(s=>({...s,isAvailable:e})));let s=await et.AnalyticsService.getCookStats(O.uid);eI(s),console.log("".concat(a," dishes ").concat(e?"activated":"deactivated"," successfully"))}}catch(e){console.error("Error updating all dishes availability:",e)}finally{em(!1)}}},eZ=e=>{let{title:s,value:a,icon:i,trend:t,description:l}=e;return(0,r.jsxs)(T.Zp,{className:"relative overflow-hidden bg-gradient-to-br from-white to-gray-50 border-0 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-atacama-orange/10 to-atacama-orange/5 rounded-full -mr-10 -mt-10"}),(0,r.jsxs)(T.Wu,{className:"p-6 relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between space-y-0 pb-3",children:[(0,r.jsx)(T.ZB,{className:"text-sm font-semibold text-gray-700",children:s}),(0,r.jsx)("div",{className:"p-2 bg-atacama-orange/10 rounded-lg",children:(0,r.jsx)(i,{className:"h-5 w-5 text-atacama-orange"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:a}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 flex items-center",children:[(0,r.jsx)("span",{className:"font-medium ".concat((null==t?void 0:t.startsWith("+"))?"text-emerald-600":(null==t?void 0:t.startsWith("-"))?"text-red-500":"text-gray-500"),children:t}),l&&(0,r.jsx)("span",{className:"ml-1",children:l})]})]})]})]})},eB=e=>{let{dish:s,onEdit:a,onToggleAvailability:i}=e;return(0,r.jsxs)(T.Zp,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"aspect-video bg-muted relative",children:[(0,r.jsx)(n.default,{src:s.image,alt:s.name,fill:!0,className:"object-cover",onError:e=>{e.currentTarget.src=eD}}),(0,r.jsx)("div",{className:"absolute top-2 right-2",children:(0,r.jsx)(R.E,{className:s.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:s.isAvailable?"Disponible":"Agotado"})})]}),(0,r.jsxs)(T.Wu,{className:"p-4",children:[(0,r.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,r.jsx)("h3",{className:"font-semibold text-lg",children:s.name})}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-2",children:s.category}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-primary",children:["$",s.price.toLocaleString("es-CL")]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:s.rating})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm text-muted-foreground mb-3",children:[(0,r.jsxs)("span",{children:[s.reviewCount," reviews"]}),(0,r.jsx)("span",{children:"Total"})]}),(0,r.jsx)("div",{className:"flex gap-2 mb-3",children:(0,r.jsx)(M.$,{variant:s.isAvailable?"default":"outline",size:"sm",className:"flex-1",onClick:()=>i(s.id,!s.isAvailable),children:s.isAvailable?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Disponible"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"No disponible"]})})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(M.$,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>a(s),children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Editar"]}),(0,r.jsxs)(M.$,{variant:"outline",size:"sm",className:"flex-1",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"Ver"]})]})]})]})},eJ=e=>{var s,a;let{order:i,isPriority:t}=e,l=(e=>{switch(e){case"pending":return{action:"accepted",text:"Aceptar Pedido",color:"bg-green-600 hover:bg-green-700"};case"accepted":return{action:"preparing",text:"Iniciar Preparaci\xf3n",color:"bg-blue-600 hover:bg-blue-700"};case"preparing":return{action:"ready",text:"Marcar como Listo",color:"bg-orange-600 hover:bg-orange-700"};default:return null}})(i.status);return(0,r.jsx)(T.Zp,{className:"transition-all duration-300 hover:shadow-lg ".concat(t?"ring-2 ring-red-200 bg-red-50/50":"hover:shadow-md"),children:(0,r.jsxs)(T.Wu,{className:"p-5",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:i.customerName}),t&&(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDEA8"})]}),(0,r.jsx)(R.E,{className:"".concat((e=>{switch(e){case"pending":return"bg-red-100 text-red-800 border-red-300";case"accepted":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"preparing":return"bg-blue-100 text-blue-800 border-blue-300";case"ready":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(i.status)," text-xs font-medium border"),children:(e=>{switch(e){case"pending":return"Nuevo Pedido";case"accepted":return"Aceptado";case"preparing":return"Preparando";case"ready":return"Listo";default:return e}})(i.status)})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",i.total.toLocaleString("es-CL")]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:(null==(a=i.orderTime)||null==(s=a.toDate())?void 0:s.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}))||"N/A"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 text-gray-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Platos (",i.dishes.length,")"]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[i.dishes.slice(0,3).map((e,s)=>(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-700",children:[e.dishName," x",e.quantity]}),(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:["$",(e.price*e.quantity).toLocaleString("es-CL")]})]},s)),i.dishes.length>3&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 text-center pt-1",children:["+",i.dishes.length-3," platos m\xe1s"]})]})]}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-700 text-xs",children:i.deliveryInfo.address})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-700 text-xs",children:i.deliveryInfo.phone})]}),i.isSelfDelivery&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Entregar\xe1s t\xfa mismo"})]})]}),i.deliveryInfo.instructions&&(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(j.A,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-yellow-800",children:"Instrucciones:"}),(0,r.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:i.deliveryInfo.instructions})]})]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[l&&(0,r.jsxs)(M.$,{onClick:()=>eR(i.id,l.action),className:"flex-1 ".concat(l.color," text-white"),size:"sm",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2"}),l.text]}),(0,r.jsx)(M.$,{variant:"outline",size:"sm",onClick:()=>window.open("tel:".concat(i.deliveryInfo.phone)),className:"flex items-center gap-1",children:(0,r.jsx)(g.A,{className:"h-4 w-4"})})]})]})})},e$=e=>{var s,a;let{order:i}=e;return(0,r.jsx)(T.Zp,{className:"hover:shadow-md transition-shadow",children:(0,r.jsxs)(T.Wu,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 text-green-500"}),(0,r.jsx)("span",{className:"font-medium text-sm",children:i.customerName})]}),(0,r.jsx)(R.E,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:"delivered"===i.status?"Entregado":"En camino"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[i.dishes.length," plato",i.dishes.length>1?"s":""]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"font-bold text-green-600",children:["$",i.total.toLocaleString("es-CL")]}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:(null==(a=i.orderTime)||null==(s=a.toDate())?void 0:s.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}))||"N/A"})]})]})})};return O?H||eS?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,r.jsx)("p",{children:H?"Verificando autenticaci\xf3n...":"Cargando dashboard..."})]})}):eu?(0,r.jsx)(ev,{onComplete:()=>{eh(!1),ep(!0),(null==O?void 0:O.uid)&&(async()=>{let e=await et.CooksService.getCookById(O.uid);ew(e);let[s,a]=await Promise.all([et.DishesService.getDishesByCook(O.uid),et.OrdersService.getOrdersByCook(O.uid)]);eb(s),eN(a);let r=a.reduce((e,s)=>e+s.total,0);eI({totalEarnings:r,activeDishes:s.filter(e=>e.isAvailable).length,pendingOrders:a.filter(e=>"pending"===e.status).length,averageRating:(null==e?void 0:e.rating)||0})})()}}):(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(z.eu,{className:"h-12 w-12",children:[(0,r.jsx)(z.BK,{src:(null==ey?void 0:ey.avatar)||O.photoURL||eD}),(0,r.jsx)(z.q5,{children:(null==ey||null==(e=ey.displayName)?void 0:e.charAt(0))||(null==(s=O.displayName)?void 0:s.charAt(0))||"C"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold",children:["\xa1Hola, ",(null==ey?void 0:ey.displayName)||O.displayName||"Cocinero","!"]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Gestiona tus platos y pedidos"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[(0,r.jsxs)(M.$,{variant:"outline",size:"sm",className:"hidden sm:flex",children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:"Notificaciones"})]}),(0,r.jsxs)(M.$,{variant:"outline",size:"sm",onClick:()=>en(!0),className:"hidden sm:flex",children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:"Configuraci\xf3n"})]}),(0,r.jsx)(F.U,{}),(0,r.jsxs)(M.$,{variant:"outline",size:"sm",onClick:q,className:"text-muted-foreground hover:text-destructive hidden sm:flex",children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:"Cerrar Sesi\xf3n"})]}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsxs)(ei.rI,{children:[(0,r.jsx)(ei.ty,{asChild:!0,children:(0,r.jsx)(M.$,{variant:"outline",size:"sm",className:"h-9 w-9 p-0",children:(0,r.jsx)(w.A,{className:"h-4 w-4"})})}),(0,r.jsxs)(ei.SQ,{align:"end",className:"w-48",children:[(0,r.jsxs)(ei._2,{onClick:()=>{},children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Notificaciones"]}),(0,r.jsxs)(ei._2,{onClick:()=>en(!0),children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Configuraci\xf3n"]}),(0,r.jsx)(ei.mB,{}),(0,r.jsxs)(ei._2,{onClick:q,className:"text-destructive",children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Cerrar Sesi\xf3n"]})]})]})})]})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,r.jsx)("div",{className:"flex space-x-1 mb-6 bg-muted p-1 rounded-lg w-fit",children:[{id:"overview",label:"Resumen"},{id:"dishes",label:"Mis Platos"},{id:"orders",label:"Pedidos"},{id:"analytics",label:"Anal\xedticas"}].map(e=>(0,r.jsx)("button",{onClick:()=>_(e.id),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(Q===e.id?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:e.label},e.id))}),"overview"===Q&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(eZ,{title:"Ganancias Totales",value:"$".concat(eC.totalEarnings.toLocaleString("es-CL")),icon:C.A,trend:"+12%",description:"del mes pasado"}),(0,r.jsx)(eZ,{title:"Platos Activos",value:eC.activeDishes,icon:A.A,trend:"+2",description:"nuevos esta semana"}),(0,r.jsx)(eZ,{title:"Pedidos Pendientes",value:eC.pendingOrders,icon:k.A,trend:"-3",description:"desde ayer"}),(0,r.jsx)(eZ,{title:"Calificaci\xf3n Promedio",value:eC.averageRating.toFixed(1),icon:o.A,trend:"+0.2",description:"este mes"})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,r.jsxs)(T.Zp,{children:[(0,r.jsxs)(T.aR,{children:[(0,r.jsx)(T.ZB,{children:"Pedidos Recientes"}),(0,r.jsx)(T.BT,{children:"\xdaltimos pedidos de clientes"})]}),(0,r.jsx)(T.Wu,{className:"space-y-4",children:ef.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.customerName}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.dishes.map(e=>e.dishName).join(", ")})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-medium",children:["$",e.total.toLocaleString("es-CL")]}),(0,r.jsx)(R.E,{className:(e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"preparing":return"bg-orange-100 text-orange-800";case"ready":return"bg-green-100 text-green-800";case"delivering":return"bg-purple-100 text-purple-800";case"delivered":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}})(e.status),variant:"secondary",children:e.status})]})]},e.id))})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsxs)(T.aR,{children:[(0,r.jsx)(T.ZB,{children:"Platos M\xe1s Populares"}),(0,r.jsx)(T.BT,{children:"Tus platos m\xe1s populares este mes"})]}),(0,r.jsx)(T.Wu,{className:"space-y-4",children:ej.sort((e,s)=>s.reviewCount-e.reviewCount).slice(0,3).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.category})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-medium",children:[e.reviewCount," reviews"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(o.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,r.jsx)("span",{className:"text-sm",children:e.rating})]})]})]},e.id))})]})]})]}),"dishes"===Q&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 via-red-50 to-yellow-50 border border-orange-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"bg-atacama-orange/10 p-3 rounded-full",children:(0,r.jsx)(A.A,{className:"h-8 w-8 text-atacama-orange"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Mis Platos"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Administra los elementos de tu men\xfa y mant\xe9n tu oferta actualizada"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[ej.length>0&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(M.$,{variant:"outline",size:"sm",onClick:()=>eL(!0),disabled:ed||ej.every(e=>e.isAvailable),className:"border-green-200 text-green-700 hover:bg-green-50 hover:border-green-300 transition-all duration-200",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),ed?"Actualizando...":"Activar Todos"]}),(0,r.jsxs)(M.$,{variant:"outline",size:"sm",onClick:()=>eL(!1),disabled:ed||ej.every(e=>!e.isAvailable),className:"border-red-200 text-red-700 hover:bg-red-50 hover:border-red-300 transition-all duration-200",children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),ed?"Actualizando...":"Desactivar Todos"]})]}),(0,r.jsxs)(M.$,{variant:"default",onClick:()=>ec(!0),className:"bg-atacama-orange hover:bg-atacama-orange/90 text-white font-semibold shadow-md hover:shadow-lg transition-all duration-200",children:[(0,r.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Agregar Plato"]})]})]}),ej.length>0&&(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-3 text-center border border-orange-100",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-atacama-orange mx-auto mb-1"}),(0,r.jsx)("div",{className:"text-lg font-bold text-gray-900",children:ej.length}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Total Platos"})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-3 text-center border border-orange-100",children:[(0,r.jsx)(b.A,{className:"h-5 w-5 text-green-500 mx-auto mb-1"}),(0,r.jsx)("div",{className:"text-lg font-bold text-gray-900",children:ej.filter(e=>e.isAvailable).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Disponibles"})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-3 text-center border border-orange-100",children:[(0,r.jsx)(I.A,{className:"h-5 w-5 text-red-500 mx-auto mb-1"}),(0,r.jsx)("div",{className:"text-lg font-bold text-gray-900",children:ej.filter(e=>!e.isAvailable).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"No Disponibles"})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-3 text-center border border-orange-100",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 text-yellow-500 mx-auto mb-1"}),(0,r.jsx)("div",{className:"text-lg font-bold text-gray-900",children:ej.reduce((e,s)=>e+s.rating,0)/ej.length||0}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Rating Promedio"})]})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ej.length>0?ej.map(e=>(0,r.jsx)(eB,{dish:e,onEdit:eM,onToggleAvailability:eF},e.id)):(0,r.jsxs)("div",{className:"col-span-full text-center py-16",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-orange-100 to-red-100 p-6 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,r.jsx)(A.A,{className:"h-12 w-12 text-atacama-orange"})}),(0,r.jsx)("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:"No tienes platos a\xfan"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Comienza creando tu primer plato y comparte tu talento culinario con la comunidad"}),(0,r.jsxs)(M.$,{variant:"default",onClick:()=>ec(!0),className:"bg-atacama-orange hover:bg-atacama-orange/90 text-white font-semibold shadow-md hover:shadow-lg transition-all duration-200 px-8 py-3",children:[(0,r.jsx)(D.A,{className:"h-5 w-5 mr-2"}),"Crear Mi Primer Plato"]})]})})]}),"orders"===Q&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Gesti\xf3n de Pedidos"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Administra todos tus pedidos de manera eficiente"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:ef.filter(e=>"pending"===e.status).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Pendientes"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:ef.filter(e=>"preparing"===e.status).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Preparando"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:ef.filter(e=>"ready"===e.status).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Listos"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-3 text-center",children:[(0,r.jsx)(k.A,{className:"h-5 w-5 text-orange-500 mx-auto mb-1"}),(0,r.jsxs)("div",{className:"text-sm font-medium",children:[ef.length," Total"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Hoy"})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-3 text-center",children:[(0,r.jsx)(C.A,{className:"h-5 w-5 text-green-500 mx-auto mb-1"}),(0,r.jsxs)("div",{className:"text-sm font-medium",children:["$",ef.reduce((e,s)=>e+s.total,0).toLocaleString("es-CL")]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Ingresos"})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-3 text-center",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 text-yellow-500 mx-auto mb-1"}),(0,r.jsx)("div",{className:"text-sm font-medium",children:"4.8"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Promedio"})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-3 text-center",children:[(0,r.jsx)(f.A,{className:"h-5 w-5 text-blue-500 mx-auto mb-1"}),(0,r.jsx)("div",{className:"text-sm font-medium",children:ef.filter(e=>["pending","accepted"].includes(e.status)).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Urgentes"})]})]})]}),(0,r.jsx)(eA,{className:"mb-6"}),ef.length>0?(0,r.jsxs)("div",{className:"space-y-8",children:[ef.filter(e=>"pending"===e.status).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"bg-red-100 p-2 rounded-lg",children:(0,r.jsx)(S.A,{className:"h-5 w-5 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-red-700",children:"\uD83D\uDEA8 Pedidos Pendientes"}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:"\xa1Requieren atenci\xf3n inmediata!"})]}),(0,r.jsxs)("div",{className:"ml-auto bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:[ef.filter(e=>"pending"===e.status).length," nuevos"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:ef.filter(e=>"pending"===e.status).map(e=>(0,r.jsx)(eJ,{order:e,isPriority:!0},e.id))})]}),ef.filter(e=>["accepted","preparing"].includes(e.status)).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg",children:(0,r.jsx)(A.A,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-blue-700",children:"\uD83D\uDC68‍\uD83C\uDF73 En Preparaci\xf3n"}),(0,r.jsx)("p",{className:"text-sm text-blue-600",children:"Pedidos que est\xe1s preparando"})]}),(0,r.jsxs)("div",{className:"ml-auto bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:[ef.filter(e=>["accepted","preparing"].includes(e.status)).length," activos"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:ef.filter(e=>["accepted","preparing"].includes(e.status)).map(e=>(0,r.jsx)(eJ,{order:e,isPriority:!1},e.id))})]}),ef.filter(e=>"ready"===e.status).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"bg-green-100 p-2 rounded-lg",children:(0,r.jsx)(b.A,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-green-700",children:"✅ Listos para Entrega"}),(0,r.jsx)("p",{className:"text-sm text-green-600",children:"Esperando ser recogidos"})]}),(0,r.jsxs)("div",{className:"ml-auto bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:[ef.filter(e=>"ready"===e.status).length," completados"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:ef.filter(e=>"ready"===e.status).map(e=>(0,r.jsx)(eJ,{order:e,isPriority:!1},e.id))})]}),ef.filter(e=>["delivering","delivered"].includes(e.status)).length>0&&(0,r.jsx)("div",{className:"border-t pt-6",children:(0,r.jsxs)("details",{className:"group",children:[(0,r.jsxs)("summary",{className:"flex items-center gap-3 mb-4 cursor-pointer",children:[(0,r.jsx)("div",{className:"bg-gray-100 p-2 rounded-lg",children:(0,r.jsx)(P.A,{className:"h-5 w-5 text-gray-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-700",children:"\uD83D\uDCE6 Historial Reciente"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Pedidos completados hoy"})]}),(0,r.jsxs)("div",{className:"ml-auto bg-gray-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:[ef.filter(e=>["delivering","delivered"].includes(e.status)).length," completados"]}),(0,r.jsx)(w.A,{className:"h-5 w-5 text-gray-400 group-open:rotate-180 transition-transform"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4 mt-4",children:ef.filter(e=>["delivering","delivered"].includes(e.status)).map(e=>(0,r.jsx)(e$,{order:e},e.id))})]})})]}):(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"bg-gray-100 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(A.A,{className:"h-12 w-12 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\xa1Todo tranquilo por aqu\xed!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"No tienes pedidos pendientes en este momento. Los nuevos pedidos aparecer\xe1n aqu\xed tan pronto como los clientes hagan sus \xf3rdenes."}),(0,r.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,r.jsxs)(M.$,{variant:"outline",className:"flex items-center gap-2",onClick:()=>_("dishes"),children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),"Ver mis platos"]}),(0,r.jsxs)(M.$,{className:"flex items-center gap-2",onClick:()=>ec(!0),children:[(0,r.jsx)(D.A,{className:"h-4 w-4"}),"Agregar nuevo plato"]})]})]})]}),"analytics"===Q&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Anal\xedticas"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Rastrea tu rendimiento"})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Resumen de Ganancias"})}),(0,r.jsx)(T.Wu,{children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(C.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"\xa1Los gr\xe1ficos de anal\xedticas llegan pronto!"})]})})]}),(0,r.jsxs)(T.Zp,{children:[(0,r.jsx)(T.aR,{children:(0,r.jsx)(T.ZB,{children:"Informaci\xf3n de Clientes"})}),(0,r.jsx)(T.Wu,{children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(E.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"\xa1Los datos de clientes llegan pronto!"})]})})]})]})]})]}),(0,r.jsx)(W,{dish:K,isOpen:ee,onClose:()=>{es(!1),X(null)},onSave:eT}),(0,r.jsx)(Y,{isOpen:ea,onClose:()=>en(!1),onSave:async e=>{try{var s,a,r,i,t,l,n,o,c,d,m,x,u;await et.CooksService.updateCook((null==O?void 0:O.uid)||"",{displayName:e.displayName,bio:e.bio,avatar:e.avatar,coverImage:e.coverImage,location:{coordinates:(null==ey||null==(s=ey.location)?void 0:s.coordinates)||{latitude:0,longitude:0,timestamp:ex.Dc.now()},address:{street:(null==ey||null==(r=ey.location)||null==(a=r.address)?void 0:a.street)||"",city:(null==ey||null==(t=ey.location)||null==(i=t.address)?void 0:i.city)||"",state:(null==ey||null==(n=ey.location)||null==(l=n.address)?void 0:l.state)||"",zipCode:(null==ey||null==(c=ey.location)||null==(o=c.address)?void 0:o.zipCode)||"",country:(null==ey||null==(m=ey.location)||null==(d=m.address)?void 0:d.country)||"",fullAddress:e.location},isActive:null==(u=null==ey||null==(x=ey.location)?void 0:x.isActive)||u,lastUpdated:ex.Dc.now()},deliveryRadius:e.deliveryRadius,specialties:e.specialties,languages:e.languages,settings:{autoAcceptOrders:e.autoAcceptOrders,maxOrdersPerDay:e.maxOrdersPerDay,selfDelivery:e.selfDelivery,workingHours:e.workingHours,workingDays:e.workingDays,currency:e.currency,timezone:e.timezone,language:e.language}});let h=await et.CooksService.getCookById((null==O?void 0:O.uid)||"");ew(h),console.log("Settings saved successfully")}catch(e){console.error("Error saving settings:",e)}en(!1)},currentUser:O}),(0,r.jsx)(er,{isOpen:eo,onClose:()=>ec(!1),onSave:ez,cookerId:null!=(a=null==O?void 0:O.uid)?a:"",cookerName:null!=(Z=null!=(L=null==ey?void 0:ey.displayName)?L:null==O?void 0:O.displayName)?Z:"Cocinero",cookerAvatar:null!=(J=null!=(B=null==ey?void 0:ey.avatar)?B:null==O?void 0:O.photoURL)?J:eD,cookerRating:null!=($=null==ey?void 0:ey.rating)?$:0})]}):(0,r.jsx)("div",{children:"Por favor inicia sesi\xf3n para acceder al panel de cocinero."})}},66579:(e,s,a)=>{"use strict";let r;a.d(s,{db:()=>o,j:()=>n,y:()=>r});var i=a(23915),t=a(45404),l=a(35317);r=(0,i.Dk)().length?(0,i.Dk)()[0]:(0,i.Wp)({apiKey:"AIzaSyBptLm3y63BDBH9Xgt_UY40ZjsgUvMOKGI",authDomain:"hometaste-tlpog.firebaseapp.com",projectId:"hometaste-tlpog",storageBucket:"hometaste-tlpog.firebasestorage.app",messagingSenderId:"72297856520",appId:"1:72297856520:web:c7d851e4c00c67ec419bbd"});let n=(0,t.xI)(r),o=(0,l.aU)(r)},88145:(e,s,a)=>{"use strict";a.d(s,{E:()=>n});var r=a(95155);a(12115);var i=a(74466),t=a(53999);let l=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,...i}=e;return(0,r.jsx)("div",{className:(0,t.cn)(l({variant:a}),s),...i})}},88482:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>n});var r=a(95155),i=a(12115),t=a(53999);let l=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300 hover:shadow-lg",a),...i})});l.displayName="Card";let n=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",a),...i})});n.displayName="CardHeader";let o=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)("h3",{ref:s,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",a),...i})});o.displayName="CardTitle";let c=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)("p",{ref:s,className:(0,t.cn)("text-sm text-muted-foreground",a),...i})});c.displayName="CardDescription";let d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("p-6 pt-0",a),...i})});d.displayName="CardContent",i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("flex items-center p-6 pt-0",a),...i})}).displayName="CardFooter"},97168:(e,s,a)=>{"use strict";a.d(s,{$:()=>d});var r=a(95155),i=a(12115),t=a(99708),l=a(74466),n=a(38274),o=a(53999);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold transition-all duration-300 transform hover:scale-105 active:scale-95 disabled:pointer-events-none disabled:opacity-50 disabled:hover:scale-100 disabled:active:scale-100 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-offset-2 relative overflow-hidden group",{variants:{variant:{default:"bg-gradient-to-r from-moai-500 to-moai-600 text-white shadow-lg hover:shadow-xl hover:shadow-moai-500/25 border-0 hover:from-moai-600 hover:to-moai-700",destructive:"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:from-red-600 hover:to-red-700",outline:"border-2 border-moai-200 bg-background/80 backdrop-blur-sm shadow-sm hover:bg-moai-50 hover:text-moai-700 hover:border-moai-300 hover:shadow-md",secondary:"bg-gradient-to-r from-pacific-500 to-pacific-600 text-white shadow-lg hover:shadow-xl hover:shadow-pacific-500/25 hover:from-pacific-600 hover:to-pacific-700",ghost:"hover:bg-moai-50/80 hover:text-moai-700 hover:backdrop-blur-sm",link:"text-moai-600 underline-offset-4 hover:underline hover:text-moai-700 p-0 h-auto shadow-none hover:shadow-none",glass:"bg-white/10 backdrop-blur-md border border-white/20 text-white shadow-lg hover:bg-white/20 hover:shadow-xl",premium:"bg-gradient-to-r from-amber-400 via-orange-500 to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-orange-500/30 hover:from-amber-500 hover:via-orange-600 hover:to-red-600"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-lg gap-1.5 px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,s)=>{let{className:a,variant:i,size:l,asChild:d=!1,loading:m=!1,icon:x,glow:u=!1,children:h,...g}=e,p=d?t.DX:"button";return(0,r.jsxs)(p,{className:(0,o.cn)(c({variant:i,size:l,className:a})),ref:s,disabled:m||g.disabled,...g,children:[(0,r.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),u&&(0,r.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-moai-500/20 to-pacific-500/20 blur-xl group-hover:blur-2xl transition-all duration-300 opacity-0 group-hover:opacity-100"}),m&&(0,r.jsx)(n.P.div,{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),x&&!m&&(0,r.jsx)(n.P.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:x}),(0,r.jsx)("span",{className:"relative z-10 flex items-center gap-2",children:h})]})});d.displayName="Button"},99474:(e,s,a)=>{"use strict";a.d(s,{T:()=>l});var r=a(95155),i=a(12115),t=a(53999);let l=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});l.displayName="Textarea"}},e=>{e.O(0,[9135,3965,6331,2670,6671,1492,8250,8034,2378,3143,4201,2482,4923,98,1278,6751,977,3015,1895,8441,5964,7358],()=>e(e.s=38053)),_N_E=e.O()}]);