"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{25731:(e,t,a)=>{a.d(t,{A:()=>c,AuthProvider:()=>d});var r=a(95155),o=a(12115),n=a(66579),i=a(45404),s=a(35317);let l=(0,o.createContext)({user:null,role:null,loading:!0,logout:async()=>{}}),d=e=>{let{children:t}=e,[a,d]=(0,o.useState)(null),[c,u]=(0,o.useState)(null),[m,f]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=(0,i.hg)(n.j,async e=>{try{if(e){d(e);let t="admin@moai.com"===e.email||"admin"===e.uid||e.email&&e.email.includes("admin"),a=(0,s.doc)(n.db,"users",e.uid),r=await (0,s.getDoc)(a),o=0,i=t?2:5;for(;!r.exists()&&o<i;){let t=Math.min(500*Math.pow(2,o),8e3);console.log("AuthContext: Retrying user document fetch (".concat(o+1,"/").concat(i,") after ").concat(t,"ms for ").concat(e.email)),await new Promise(e=>setTimeout(e,t)),r=await (0,s.getDoc)(a),o++}if(r.exists()){let o=r.data().role;t&&"Admin"!==o&&(o="Admin",await (0,s.BN)(a,{role:"Admin"},{merge:!0})),u(o),console.log("AuthContext: User ".concat(e.email," has role: ").concat(o))}else if(t)await (0,s.BN)(a,{role:"Admin"},{merge:!0}),u("Admin"),console.log("AuthContext: Created Admin role for ".concat(e.email));else{console.warn("AuthContext: User ".concat(e.email," document not found after ").concat(o," retries. This may indicate a network issue or missing registration.")),setTimeout(()=>{u(null),console.log("AuthContext: Set role to null for ".concat(e.email," after extended wait"))},2e3);return}}else d(null),u(null)}catch(t){console.error("Auth state change error:",t),e?(d(e),u("admin@moai.com"===e.email||"admin"===e.uid||e.email&&e.email.includes("admin")?"Admin":null)):(d(null),u(null))}finally{f(!1)}});return()=>e()},[]);let g=async()=>{try{await (0,i.CI)(n.j);try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.warn("API logout failed, but Firebase logout succeeded:",e)}}catch(e){console.error("Error signing out:",e)}};return(0,r.jsx)(l.Provider,{value:{user:a,role:c,loading:m,logout:g},children:t})},c=()=>(0,o.useContext)(l)},53999:(e,t,a)=>{a.d(t,{$B:()=>m,$g:()=>i,Dm:()=>d,HM:()=>l,bC:()=>u,cn:()=>n,generateDeliveryCode:()=>s,uA:()=>c});var r=a(52596),o=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}function i(e){return"$".concat(Math.round(e).toLocaleString("es-CL"))}function s(){return Math.floor(1e3+9e3*Math.random()).toString()}function l(e){return e.replace(/(\d{2})(\d{2})/,"$1-$2")}function d(e){let t=0;return e.forEach(e=>{let a=function(e){var t,a;let r=e.toLowerCase();return r.includes("hour")?60*parseFloat((null==(t=r.match(/(\d+(?:\.\d+)?)/))?void 0:t[1])||"1"):r.includes("min")?parseInt((null==(a=r.match(/(\d+)/))?void 0:a[1])||"30"):30}(e.prepTime);a>t&&(t=a)}),t}function c(e,t){return Math.min(Math.max((new Date().getTime()-e.getTime())/6e4/t*100,0),100)}function u(e,t){let a=new Date(e);return a.setMinutes(a.getMinutes()+t),a}function m(e,t){let a=new Date,r=u(e,t).getTime()-a.getTime();if(r<=0)return"Listo";let o=Math.ceil(r/6e4);if(o<60)return"".concat(o," min");{let e=Math.floor(o/60);return"".concat(e,"h ").concat(o%60,"m")}}},66579:(e,t,a)=>{let r;a.d(t,{db:()=>l,j:()=>s,y:()=>r});var o=a(23915),n=a(45404),i=a(35317);r=(0,o.Dk)().length?(0,o.Dk)()[0]:(0,o.Wp)({apiKey:"AIzaSyBptLm3y63BDBH9Xgt_UY40ZjsgUvMOKGI",authDomain:"hometaste-tlpog.firebaseapp.com",projectId:"hometaste-tlpog",storageBucket:"hometaste-tlpog.firebasestorage.app",messagingSenderId:"72297856520",appId:"1:72297856520:web:c7d851e4c00c67ec419bbd"});let s=(0,n.xI)(r),l=(0,i.aU)(r)},88145:(e,t,a)=>{a.d(t,{E:()=>s});var r=a(95155);a(12115);var o=a(74466),n=a(53999);let i=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:t,variant:a,...o}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...o})}},88482:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>s});var r=a(95155),o=a(12115),n=a(53999);let i=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300 hover:shadow-lg",a),...o})});i.displayName="Card";let s=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...o})});s.displayName="CardHeader";let l=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...o})});l.displayName="CardTitle";let d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...o})});d.displayName="CardDescription";let c=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...o})});c.displayName="CardContent",o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...o})}).displayName="CardFooter"},97168:(e,t,a)=>{a.d(t,{$:()=>c});var r=a(95155),o=a(12115),n=a(99708),i=a(74466),s=a(38274),l=a(53999);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold transition-all duration-300 transform hover:scale-105 active:scale-95 disabled:pointer-events-none disabled:opacity-50 disabled:hover:scale-100 disabled:active:scale-100 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-offset-2 relative overflow-hidden group",{variants:{variant:{default:"bg-gradient-to-r from-moai-500 to-moai-600 text-white shadow-lg hover:shadow-xl hover:shadow-moai-500/25 border-0 hover:from-moai-600 hover:to-moai-700",destructive:"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:from-red-600 hover:to-red-700",outline:"border-2 border-moai-200 bg-background/80 backdrop-blur-sm shadow-sm hover:bg-moai-50 hover:text-moai-700 hover:border-moai-300 hover:shadow-md",secondary:"bg-gradient-to-r from-pacific-500 to-pacific-600 text-white shadow-lg hover:shadow-xl hover:shadow-pacific-500/25 hover:from-pacific-600 hover:to-pacific-700",ghost:"hover:bg-moai-50/80 hover:text-moai-700 hover:backdrop-blur-sm",link:"text-moai-600 underline-offset-4 hover:underline hover:text-moai-700 p-0 h-auto shadow-none hover:shadow-none",glass:"bg-white/10 backdrop-blur-md border border-white/20 text-white shadow-lg hover:bg-white/20 hover:shadow-xl",premium:"bg-gradient-to-r from-amber-400 via-orange-500 to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-orange-500/30 hover:from-amber-500 hover:via-orange-600 hover:to-red-600"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-lg gap-1.5 px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:a,variant:o,size:i,asChild:c=!1,loading:u=!1,icon:m,glow:f=!1,children:g,...h}=e,p=c?n.DX:"button";return(0,r.jsxs)(p,{className:(0,l.cn)(d({variant:o,size:i,className:a})),ref:t,disabled:u||h.disabled,...h,children:[(0,r.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),f&&(0,r.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-moai-500/20 to-pacific-500/20 blur-xl group-hover:blur-2xl transition-all duration-300 opacity-0 group-hover:opacity-100"}),u&&(0,r.jsx)(s.P.div,{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),m&&!u&&(0,r.jsx)(s.P.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:m}),(0,r.jsx)("span",{className:"relative z-10 flex items-center gap-2",children:g})]})});c.displayName="Button"},99840:(e,t,a)=>{a.d(t,{Cf:()=>u,Es:()=>f,L3:()=>g,c7:()=>m,lG:()=>s,rr:()=>h,zM:()=>l});var r=a(95155);a(12115);var o=a(15452),n=a(54416),i=a(53999);function s(e){let{...t}=e;return(0,r.jsx)(o.bL,{"data-slot":"dialog",...t})}function l(e){let{...t}=e;return(0,r.jsx)(o.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,r.jsx)(o.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,r.jsx)(o.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...a})}function u(e){let{className:t,children:a,showCloseButton:s=!0,...l}=e;return(0,r.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,r.jsx)(c,{}),(0,r.jsxs)(o.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-white data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...l,children:[a,s&&(0,r.jsxs)(o.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function f(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function g(e){let{className:t,...a}=e;return(0,r.jsx)(o.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",t),...a})}function h(e){let{className:t,...a}=e;return(0,r.jsx)(o.VY,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...a})}}}]);