[debug] [2025-08-30T04:28:41.804Z] ----------------------------------------------------------------------
[debug] [2025-08-30T04:28:41.808Z] Command:       D:\Programas\Node.js\node.exe C:\Users\vicen\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy
[debug] [2025-08-30T04:28:41.808Z] CLI Version:   14.11.2
[debug] [2025-08-30T04:28:41.808Z] Platform:      win32
[debug] [2025-08-30T04:28:41.808Z] Node Version:  v22.17.0
[debug] [2025-08-30T04:28:41.809Z] Time:          Sat Aug 30 2025 00:28:41 GMT-0400 (hora estándar de Chile)
[debug] [2025-08-30T04:28:41.809Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-08-30T04:28:41.811Z] >>> [apiv2][query] GET https://firebase-public.firebaseio.com/cli.json [none]
[debug] [2025-08-30T04:28:42.217Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-08-30T04:28:42.218Z] > authorizing via signed-in user (vicente.litvak@gmail.com)
[debug] [2025-08-30T04:28:42.218Z] [iam] checking project hometaste-tlpog for permissions ["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-08-30T04:28:42.220Z] Checked if tokens are valid: false, expires at: 1755139211382
[debug] [2025-08-30T04:28:42.220Z] Checked if tokens are valid: false, expires at: 1755139211382
[debug] [2025-08-30T04:28:42.220Z] > refreshing access token with scopes: []
[debug] [2025-08-30T04:28:42.222Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-08-30T04:28:42.222Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-08-30T04:28:42.418Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-08-30T04:28:42.418Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-08-30T04:28:42.463Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/hometaste-tlpog:testIamPermissions [none]
[debug] [2025-08-30T04:28:42.464Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/hometaste-tlpog:testIamPermissions x-goog-quota-user=projects/hometaste-tlpog
[debug] [2025-08-30T04:28:42.464Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/hometaste-tlpog:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-08-30T04:28:42.651Z] <<< [apiv2][status] GET https://firebase-public.firebaseio.com/cli.json 200
[debug] [2025-08-30T04:28:42.651Z] <<< [apiv2][body] GET https://firebase-public.firebaseio.com/cli.json {"cloudBuildErrorAfter":1594252800000,"cloudBuildWarnAfter":1590019200000,"defaultNode10After":1594252800000,"minVersion":"3.0.5","node8DeploysDisabledAfter":1613390400000,"node8RuntimeDisabledAfter":1615809600000,"node8WarnAfter":1600128000000}
[debug] [2025-08-30T04:28:43.453Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/hometaste-tlpog:testIamPermissions 200
[debug] [2025-08-30T04:28:43.453Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/hometaste-tlpog:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-08-30T04:28:43.453Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:43.453Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:43.454Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/hometaste-tlpog [none]
[debug] [2025-08-30T04:28:43.861Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/hometaste-tlpog 200
[debug] [2025-08-30T04:28:43.861Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/hometaste-tlpog {"projectId":"hometaste-tlpog","projectNumber":"72297856520","displayName":"Moai delivery app","name":"projects/hometaste-tlpog","resources":{"hostingSite":"hometaste-tlpog"},"state":"ACTIVE","etag":"1_f39eceb0-7211-4d49-b657-021563d1f663"}
[debug] [2025-08-30T04:28:47.230Z] defaultcredentials: writing to file C:\Users\vicen\AppData\Roaming\firebase\vicente_litvak_gmail.com_application_default_credentials.json
[debug] [2025-08-30T04:28:47.232Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:47.232Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:47.233Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites pageToken=&pageSize=10
[debug] [2025-08-30T04:28:48.311Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites 200
[debug] [2025-08-30T04:28:48.311Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites {"sites":[{"name":"projects/hometaste-tlpog/sites/hometaste-tlpog","defaultUrl":"https://hometaste-tlpog.web.app","type":"DEFAULT_SITE"}]}
[debug] [2025-08-30T04:28:48.311Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:48.312Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:48.312Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites 
[debug] [2025-08-30T04:28:48.695Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites 200
[debug] [2025-08-30T04:28:48.696Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites {"sites":[{"name":"projects/hometaste-tlpog/sites/hometaste-tlpog","defaultUrl":"https://hometaste-tlpog.web.app","type":"DEFAULT_SITE"}]}
[debug] [2025-08-30T04:28:48.696Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:48.696Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:48.696Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/hometaste-tlpog/webApps/-/config [none]
[debug] [2025-08-30T04:28:49.472Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/hometaste-tlpog/webApps/-/config 200
[debug] [2025-08-30T04:28:49.472Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/hometaste-tlpog/webApps/-/config {"projectId":"hometaste-tlpog","appId":"1:72297856520:web:c7d851e4c00c67ec419bbd","storageBucket":"hometaste-tlpog.firebasestorage.app","apiKey":"AIzaSyBptLm3y63BDBH9Xgt_UY40ZjsgUvMOKGI","authDomain":"hometaste-tlpog.firebaseapp.com","messagingSenderId":"72297856520"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-08-30T04:28:56.920Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:56.921Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:28:56.921Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites/hometaste-tlpog [none]
[debug] [2025-08-30T04:28:57.987Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites/hometaste-tlpog 200
[debug] [2025-08-30T04:28:57.987Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites/hometaste-tlpog {"name":"projects/hometaste-tlpog/sites/hometaste-tlpog","defaultUrl":"https://hometaste-tlpog.web.app","type":"DEFAULT_SITE"}
[info]  ⚠ Invalid next.config.ts options detected: 

[info]  ⚠     Unrecognized key(s) in object: 'instrumentationHook' at "experimental"
 ⚠     Unrecognized key(s) in object: 'sentry'
 ⚠ See more info here: https://nextjs.org/docs/messages/invalid-next-config

[info]  ⚠ `experimental.instrumentationHook` is no longer needed, because `instrumentation.js` is available by default. You can remove it from next.config.ts.

[info]    ▲ Next.js 15.4.5
   - Environments: .env.local

[info]    - Experiments (use with caution):
     ✓ instrumentationHook


[info]    Creating an optimized production build ...

[info]  ⚠ Compiled with warnings in 8.0s


[info] ./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/instrumentation.js
Critical dependency: the request of a dependency is an expression

Import trace for requested module:
./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/instrumentation.js
./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/index.js
./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/platform/index.js
./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/index.js
./node_modules/@prisma/instrumentation/dist/index.js
./node_modules/@sentry/node/build/cjs/integrations/tracing/prisma.js
./node_modules/@sentry/node/build/cjs/index.js
./node_modules/@sentry/nextjs/build/cjs/index.server.js
./app/global-error.tsx

./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/instrumentation.js
Critical dependency: the request of a dependency is an expression

Import trace for requested module:
./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/instrumentation.js
./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/index.js
./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/platform/index.js
./node_modules/@prisma/instrumentation/node_modules/@opentelemetry/instrumentation/build/esm/index.js
./node_modules/@prisma/instrumentation/dist/index.js
./node_modules/@sentry/node/build/cjs/integrations/tracing/prisma.js
./node_modules/@sentry/node/build/cjs/index.js
./node_modules/@sentry/nextjs/build/cjs/index.server.js
./lib/services/monitoringService.ts
./app/api/mercadopago/create-preference/route.ts


[info]  ✓ Compiled successfully in 13.0s

[info]    Skipping validation of types

[info]    Skipping linting

[info]    Collecting page data ...

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ⚙️  enable debug logging with { debug: true }

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ⚙️  suppress all logs with { quiet: true }

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: 📡 observe env with Radar: https://dotenvx.com/radar

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ⚙️  suppress all logs with { quiet: true }

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: 📡 auto-backup env with Radar: https://dotenvx.com/radar

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: 🛠️  run anywhere with `dotenvx run -- yourcommand`

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ⚙️  suppress all logs with { quiet: true }

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ⚙️  suppress all logs with { quiet: true }

[info]    Generating static pages (0/43) ...

[info]    Generating static pages (10/43) 

[info]    Generating static pages (21/43) 

[info] [dotenv@17.2.1] injecting env (0) from .env.local -- tip: 📡 auto-backup env with Radar: https://dotenvx.com/radar

[info]    Generating static pages (32/43) 

[info]  ✓ Generating static pages (43/43)

[info]    Finalizing page optimization ...

[info]    Collecting build traces ...

[info] 

[info] Route (app)                                     Size  First Load JS
┌ ○ /                                        50.4 kB         354 kB
├ ○ /_not-found                                998 B         102 kB
├ ○ /admin                                     533 B         101 kB
├ ○ /admin/dashboard                         11.2 kB         302 kB
├ ○ /admin/monitoring                        8.86 kB         284 kB
├ ○ /admin/verify                            4.54 kB         275 kB
├ ƒ /api/admin/system-status                   191 B         101 kB
├ ƒ /api/auth/login                            191 B         101 kB
├ ƒ /api/auth/logout                           191 B         101 kB
├ ƒ /api/auth/update-role                      191 B         101 kB
├ ƒ /api/docs                                  191 B         101 kB
├ ƒ /api/email/send-order-notification         191 B         101 kB
├ ƒ /api/fcm/save-token                        191 B         101 kB
├ ƒ /api/fcm/send                              191 B         101 kB
├ ƒ /api/fcm/send-to-topic                     191 B         101 kB
├ ƒ /api/fcm/subscribe                         191 B         101 kB
├ ƒ /api/fcm/unsubscribe                       191 B         101 kB
├ ƒ /api/health                                191 B         101 kB
├ ƒ /api/image                                 191 B         101 kB
├ ƒ /api/maps/directions                       191 B         101 kB
├ ƒ /api/mercadopago/cancel-authorization      191 B         101 kB
├ ƒ /api/mercadopago/capture-payment           191 B         101 kB
├ ƒ /api/mercadopago/create-preference         191 B         101 kB
├ ƒ /api/mercadopago/create-preference-hold    191 B         101 kB
├ ƒ /api/mercadopago/payment-status/[id]       191 B         101 kB
├ ƒ /api/mercadopago/refund-payment            191 B         101 kB
├ ƒ /api/mercadopago/webhook                   191 B         101 kB
├ ƒ /api/test-env                              191 B         101 kB
├ ○ /cart                                    11.3 kB         304 kB
├ ○ /client/home                             18.3 kB         353 kB
├ ○ /client/orders                           10.7 kB         285 kB
├ ○ /cooker/dashboard                        44.1 kB         387 kB
├ ƒ /cooks/[id]                              6.37 kB         302 kB
├ ○ /dishes                                  17.2 kB         296 kB
├ ƒ /dishes/[id]                             7.19 kB         302 kB
├ ○ /driver/dashboard                        26.1 kB         355 kB
├ ○ /driver/delivery-verification            7.82 kB         282 kB
├ ○ /login                                    6.4 kB         280 kB
├ ○ /offline                                 7.56 kB         162 kB
├ ƒ /orders/[orderId]                        14.3 kB         299 kB
├ ƒ /orders/[orderId]/tracking               15.3 kB         293 kB
├ ○ /payment/failure                         4.43 kB         150 kB
├ ○ /payment/pending                         4.33 kB         150 kB
├ ○ /payment/success                         5.44 kB         294 kB
├ ○ /search                                  5.52 kB         332 kB
└ ○ /support                                 14.8 kB         314 kB
+ First Load JS shared by all                 101 kB
  ├ chunks/4bd1b696-cc729d47eba2cee4.js      54.1 kB
  ├ chunks/5964-40978821a2ce41e4.js          43.9 kB
  └ other shared chunks (total)               2.7 kB



[info] ○  (Static)   prerendered as static content
ƒ  (Dynamic)  server-rendered on demand


[info] Building a Cloud Function to run this application. This is needed due to:
[info]  • non-static component /api/auth/logout/route
[info]  • non-static component /api/auth/update-role/route
[info]  • non-static component /api/docs/route
[info]  • non-static component /api/email/send-order-notification/route
[info]  • non-static component /api/fcm/save-token/route
[debug] [2025-08-30T04:30:02.561Z]  • non-static component /api/fcm/send-to-topic/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/fcm/send/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/fcm/subscribe/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/auth/login/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/fcm/unsubscribe/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/mercadopago/cancel-authorization/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/mercadopago/capture-payment/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/admin/system-status/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/image/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/maps/directions/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/mercadopago/create-preference-hold/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/mercadopago/payment-status/[id]/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/mercadopago/refund-payment/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/mercadopago/webhook/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/health/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/test-env/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /api/mercadopago/create-preference/route
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /cooks/[id]/page
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /dishes/[id]/page
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /orders/[orderId]/page
[debug] [2025-08-30T04:30:02.562Z]  • non-static component /orders/[orderId]/tracking/page
[info]  • and 21 other reasons, use --debug to see more
[info] 
[debug] [2025-08-30T04:30:03.000Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:30:03.001Z] Checked if tokens are valid: true, expires at: 1756531721419
[debug] [2025-08-30T04:30:03.001Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites/hometaste-tlpog [none]
[debug] [2025-08-30T04:30:04.021Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites/hometaste-tlpog 200
[debug] [2025-08-30T04:30:04.021Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/hometaste-tlpog/sites/hometaste-tlpog {"name":"projects/hometaste-tlpog/sites/hometaste-tlpog","defaultUrl":"https://hometaste-tlpog.web.app","type":"DEFAULT_SITE"}
[warn] !  This integration expects Node version 16, 18, or 20. You're running version 22, problems may be encountered. 
[debug] [2025-08-30T04:30:05.346Z] Error: Command failed: npm i --omit dev --no-audit
    at genericNodeError (node:internal/errors:983:15)
    at wrappedFn (node:internal/errors:537:14)
    at checkExecSyncError (node:child_process:883:11)
    at execSync (node:child_process:955:15)
    at prepareFrameworks (C:\Users\vicen\AppData\Roaming\npm\node_modules\firebase-tools\lib\frameworks\index.js:373:42)
    at async deploy (C:\Users\vicen\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\index.js:78:9)
[error] 
[error] Error: An unexpected error has occurred.
